---
permalink: ilm/data-protection-options-for-ingest.html 
sidebar: sidebar 
keywords: ingest options, balanced ingest, strict ingest, dual-commit ingest 
summary: ILM ルールを作成するときに、取り込み時にオブジェクトを保護するための 3 つのオプション（デュアル コミット、厳密、バランス）のいずれかを指定します。 
---
= 取り込みオプション
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ルールを作成するときに、取り込み時にオブジェクトを保護するための 3 つのオプション（デュアル コミット、厳密、バランス）のいずれかを指定します。

選択に応じて、 StorageGRID は中間コピーを作成し、後で ILM 評価するためにオブジェクトをキューに入れるか、同期配置を使用して ILM 要件を満たすためにすぐにコピーを作成します。



== 取り込みオプションのフローチャート

フローチャートは、3 つの取り込みオプションをそれぞれ使用する ILM ルールによってオブジェクトが一致した場合に何が起こるかを示しています。

image::../media/ingest_object_lifecycle.png[各取り込みオプションでオブジェクトの取り込みがどのように行われるかを示す図]



== Dual commit

デュアル コミット オプションを選択すると、 StorageGRID は2 つの異なるストレージ ノードに中間オブジェクトのコピーを即座に作成し、クライアントに「取り込み成功」メッセージを返します。オブジェクトは ILM 評価のためにキューに入れられ、ルールの配置指示を満たすコピーが後で作成されます。デュアルコミットの直後に ILM ポリシーを処理できない場合は、サイト損失保護の実現に時間がかかる可能性があります。

次のいずれかの場合にデュアルコミット オプションを使用します。

* マルチサイト ILM ルールを使用しており、クライアントの取り込み遅延が主な考慮事項です。デュアル コミットを使用する場合、デュアル コミット コピーが ILM を満たしていない場合は、グリッドがデュアル コミット コピーの作成と削除という追加作業を実行できることを確認する必要があります。具体的な制限事項は次のとおりです。
+
** グリッドの負荷は、ILM バックログを防ぐために十分に低くする必要があります。
** グリッドには、十分なハードウェア リソース (IOPS、CPU、メモリ、ネットワーク帯域幅など) が必要です。


* マルチサイト ILM ルールを使用しており、サイト間の WAN 接続では通常、遅延が長かったり、帯域幅が制限されたりします。このシナリオでは、デュアル コミット オプションを使用すると、クライアントのタイムアウトを防ぐことができます。デュアルコミット オプションを選択する前に、現実的なワークロードでクライアント アプリケーションをテストする必要があります。




== バランス（デフォルト）

「バランス」オプションを選択すると、 StorageGRID は取り込み時に同期配置も使用し、ルールの配置指示で指定されたすべてのコピーを直ちに作成します。  Strict オプションとは対照的に、 StorageGRID がすべてのコピーをすぐに作成できない場合は、代わりにデュアルコミットを使用します。  ILM ポリシーで複数のサイトへの配置が使用され、即時のサイト損失保護を実現できない場合は、*ILM 配置が達成できない* というアラートがトリガーされます。

データ保護、グリッド パフォーマンス、取り込みの成功の最適な組み合わせを実現するには、バランス オプションを使用します。  「バランス」は、ILM ルールの作成ウィザードのデフォルト オプションです。



== 厳しい

[厳密] オプションを選択すると、 StorageGRID は取り込み時に同期配置を使用し、ルールの配置指示で指定されたすべてのオブジェクトのコピーを直ちに作成します。たとえば、必要なストレージの場所が一時的に利用できないなどの理由で、 StorageGRID がすべてのコピーを作成できない場合、取り込みは失敗します。クライアントは操作を再試行する必要があります。

ILM ルールで指定された場所にのみオブジェクトを即時に保存するという運用上または規制上の要件がある場合は、「厳密」オプションを使用します。たとえば、規制要件を満たすには、厳密オプションと場所の制約の詳細フィルターを使用して、オブジェクトが特定のデータ センターに保存されないようにする必要があります。

見るlink:example-5-ilm-rules-and-policy-for-strict-ingest-behavior.html["例5: 厳格な取り込み動作のためのILMルールとポリシー"] 。
