---
permalink: ilm/create-ilm-rule-enter-details.html 
sidebar: sidebar 
keywords: ILM rule step 1, define basics 
summary: 'ILM ルールの作成ウィザードのステップ 1 \(詳細の入力\) では、ルールの名前と説明を入力し、ルールのフィルターを定義できます。' 
---
= ステップ1/3: 詳細を入力する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ルールの作成ウィザードの *詳細の入力* ステップでは、ルールの名前と説明を入力し、ルールのフィルターを定義できます。

ルールの説明の入力とフィルターの定義はオプションです。

.タスク概要
オブジェクトをlink:what-ilm-rule-is.html["ILMルール"]StorageGRID は、オブジェクトのメタデータをルールのフィルターと比較します。オブジェクト メタデータがすべてのフィルターに一致する場合、 StorageGRID はルールを使用してオブジェクトを配置します。すべてのオブジェクトに適用するルールを設計することも、1 つ以上のテナント アカウントやバケット名などの基本フィルター、またはオブジェクトのサイズやユーザー メタデータなどの詳細フィルターを指定することもできます。

.手順
. *名前* フィールドにルールの一意の名前を入力します。
. 必要に応じて、「*説明*」フィールドにルールの簡単な説明を入力します。
+
後でルールを認識できるように、ルールの目的または機能を説明する必要があります。

. 必要に応じて、このルールを適用する 1 つ以上の S3 テナント アカウントを選択します。このルールがすべてのテナントに適用される場合、このフィールドは空白のままにします。
+
ルートアクセス権限またはテナント アカウント権限のいずれかを持っていない場合、リストからテナントを選択することはできません。代わりに、テナント ID を入力するか、複数の ID をコンマ区切りの文字列として入力します。

. 必要に応じて、このルールを適用する S3 バケットを指定します。
+
*すべてのバケットに適用* が選択されている場合 (デフォルト)、ルールはすべての S3 バケットに適用されます。

. S3 テナントの場合、オプションで *はい* を選択して、バージョン管理が有効になっている S3 バケット内の古いオブジェクト バージョンにのみルールを適用します。
+
「はい」を選択した場合、「現在時刻以外」が参照時刻として自動的に選択されます。link:create-ilm-rule-define-placements.html["ILMルールの作成ウィザードのステップ2"] 。

+

NOTE: 非現在の時間は、バージョン管理が有効なバケット内の S3 オブジェクトにのみ適用されます。見るlink:../s3/operations-on-buckets.html["バケットの操作、PutBucketVersioning"]そしてlink:managing-objects-with-s3-object-lock.html["S3 オブジェクトロックでオブジェクトを管理する"]。

+
このオプションを使用すると、現在のオブジェクト バージョン以外のバージョンをフィルター処理して、バージョン管理されたオブジェクトのストレージへの影響を軽減できます。見るlink:example-4-ilm-rules-and-policy-for-s3-versioned-objects.html["例4: S3バージョン管理オブジェクトのILMルールとポリシー"] 。

. 必要に応じて、「*高度なフィルターを追加*」を選択して追加のフィルターを指定します。
+
高度なフィルタリングを構成しない場合、ルールは基本フィルタに一致するすべてのオブジェクトに適用されます。高度なフィルタリングの詳細については、以下を参照してください。<<ILMルールで高度なフィルターを使用する>>そして<<複数のメタデータタイプと値を指定する>>。

. *続行*を選択します。link:create-ilm-rule-define-placements.html["ステップ2（配置を定義する）"]ILM ルールの作成ウィザードが表示されます。




== ILMルールで高度なフィルターを使用する

高度なフィルタリングを使用すると、メタデータに基づいて特定のオブジェクトにのみ適用される ILM ルールを作成できます。ルールの高度なフィルタリングを設定するときは、一致させるメタデータの種類を選択し、演算子を選択して、メタデータ値を指定します。オブジェクトが評価されるとき、ILM ルールは、高度なフィルターに一致するメタデータを持つオブジェクトにのみ適用されます。

次の表は、高度なフィルターで指定できるメタデータの種類、各メタデータの種類に使用できる演算子、および予想されるメタデータ値を示しています。

[cols="1a,1a,2a"]
|===
| メタデータタイプ | サポートされている演算子 | メタデータ値 


 a| 
取り込み時間
 a| 
* が次の値と等しい
* が次の値と等しくない
* 前に
* またはそれ以前
* 後です
* 以降です

 a| 
オブジェクトが取り込まれた日時。

*注:* 新しい ILM ポリシーをアクティブ化するときにリソースの問題を回避するには、多数の既存オブジェクトの場所を変更する可能性のあるルールで、取り込み時間の詳細フィルタを使用します。既存のオブジェクトが不必要に移動されないように、取り込み時間を新しいポリシーが有効になるおおよその時刻以上に設定します。



 a| 
鍵
 a| 
* 等しい
* が次の値と等しくない
* が次の値を含む
* 含まれていない
* が次の値で始まる
* で始まっていない
* 終わりは
* 終わらない

 a| 
一意の S3 オブジェクト キーの全部または一部。

例えば、 `.txt`または `test-object/`。



 a| 
最終アクセス時間
 a| 
* が次の値と等しい
* が次の値と等しくない
* 前に
* またはそれ以前
* 後です
* 以降です

 a| 
オブジェクトが最後に取得（読み取りまたは表示）された日時。

*注:*link:using-last-access-time-in-ilm-rules.html["最終アクセス時刻を使用する"]高度なフィルターとして、S3 バケットの最終アクセス時間の更新を有効にする必要があります。



 a| 
場所の制約（S3のみ）
 a| 
* 等しい
* が次の値と等しくない

 a| 
S3 バケットが作成されたリージョン。表示される領域を定義するには、*ILM* > *Regions* を使用します。

*注:* us-east-1 の値は、us-east-1 リージョンで作成されたバケット内のオブジェクトと、リージョンが指定されていないバケット内のオブジェクトに一致します。見るlink:configuring-regions-optional-and-s3-only.html["リージョンを構成する（オプション、S3のみ）"] 。



 a| 
オブジェクトのサイズ
 a| 
* 等しい
* が次の値と等しくない
* が次の値より小さい
* 以下
* が次の値より大きい
* より大きいか等しい

 a| 
オブジェクトのサイズ。

消失訂正符号化は、1 MB を超えるオブジェクトに最適です。非常に小さな消去符号化フラグメントを管理するオーバーヘッドを回避するために、200 KB 未満のオブジェクトには消去符号化を使用しないでください。



 a| 
ユーザーメタデータ
 a| 
* が次の値を含む
* 終わりは
* 等しい
* 存在する
* が次の値で始まる
* 含まれていない
* 終わらない
* が次の値と等しくない
* 存在しない
* で始まっていない

 a| 
キーと値のペア。*ユーザー メタデータ名* がキーで、*メタデータ値* が値です。

たとえば、ユーザーメタデータを持つオブジェクトをフィルタリングするには、 `color=blue` 、 特定 `color`*ユーザーメタデータ名*の場合、 `equals`オペレーターの場合、 `blue` *メタデータ値* 用。

*注:* ユーザー メタデータ名では大文字と小文字は区別されませんが、ユーザー メタデータ値では大文字と小文字が区別されます。



 a| 
オブジェクトタグ（S3のみ）
 a| 
* が次の値を含む
* 終わりは
* 等しい
* 存在する
* が次の値で始まる
* 含まれていない
* 終わらない
* が次の値と等しくない
* 存在しない
* で始まっていない

 a| 
キーと値のペア。*オブジェクト タグ名* がキー、*オブジェクト タグ値* が値です。

たとえば、オブジェクトタグが `Image=True`、 特定 `Image`*オブジェクトタグ名*の場合、 `equals`オペレーターの場合、 `True` *オブジェクト タグ値* 用。

*注意:* オブジェクト タグ名とオブジェクト タグ値では大文字と小文字が区別されます。これらの項目は、オブジェクトに対して定義されたとおりに正確に入力する必要があります。

|===


== 複数のメタデータタイプと値を指定する

高度なフィルタリングを定義する場合、複数の種類のメタデータと複数のメタデータ値を指定できます。たとえば、サイズが 10 MB から 100 MB までのオブジェクトに一致するルールが必要な場合は、*オブジェクト サイズ* メタデータ タイプを選択し、2 つのメタデータ値を指定します。

* 最初のメタデータ値は、10 MB 以上のオブジェクトを指定します。
* 2 番目のメタデータ値は、100 MB 以下のオブジェクトを指定します。


image::../media/advanced_filtering_size_between.png[オブジェクトサイズの高度なフィルタリングの例]

複数のエントリを使用すると、どのオブジェクトが一致するかを正確に制御できます。次の例では、ルールは、camera_type ユーザー メタデータの値として Brand A または Brand B を持つオブジェクトに適用されます。ただし、このルールは 10 MB 未満のブランド B オブジェクトにのみ適用されます。

image::../media/advanced_filtering_multiple_rows.png[ユーザーメタデータの高度なフィルタリングの例]
