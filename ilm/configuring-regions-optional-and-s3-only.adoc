---
permalink: ilm/configuring-regions-optional-and-s3-only.html 
sidebar: sidebar 
keywords: S3 regions, region, ilm rules 
summary: ILM ルールでは、S3 バケットが作成されたリージョンに基づいてオブジェクトをフィルタリングできるため、異なるリージョンのオブジェクトを異なるストレージの場所に保存できます。 
---
= リージョンを構成する（オプション、S3のみ）
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ルールでは、S3 バケットが作成されたリージョンに基づいてオブジェクトをフィルタリングできるため、異なるリージョンのオブジェクトを異なるストレージの場所に保存できます。

S3 バケットのリージョンをルール内のフィルターとして使用する場合は、まずシステム内のバケットで使用できるリージョンを作成する必要があります。


NOTE: バケットを作成した後は、バケットのリージョンを変更することはできません。

.開始する前に
* グリッドマネージャにサインインするには、link:../admin/web-browser-requirements.html["サポートされているウェブブラウザ"] 。
* あなたが持っているlink:../admin/admin-group-permissions.html["特定のアクセス権限"]。


.タスク概要
S3 バケットを作成するときに、特定のリージョンにバケットを作成するように指定できます。リージョンを指定すると、バケットをユーザーに地理的に近づけることができるため、レイテンシを最適化し、コストを最小限に抑え、規制要件に対応することができます。

ILM ルールを作成するときに、S3 バケットに関連付けられたリージョンを高度なフィルターとして使用することが必要な場合があります。たとえば、S3バケット内のオブジェクトにのみ適用されるルールを設計できます。 `us-west-2`地域。次に、それらのオブジェクトのコピーをそのリージョン内のデータセンター サイトのストレージ ノードに配置するように指定して、レイテンシを最適化できます。

リージョンを構成するときは、次のガイドラインに従ってください。

* デフォルトでは、すべてのバケットは `us-east-1`地域。
* テナント マネージャまたはテナント管理 API を使用してバケットを作成するとき、または S3 PUT バケット API リクエストの LocationConstraint リクエスト要素を使用してバケットを作成するときに、デフォルト以外のリージョンを指定するには、まずグリッド マネージャを使用してリージョンを作成する必要があります。  PUT Bucket リクエストがStorageGRIDで定義されていないリージョンを使用すると、エラーが発生します。
* S3 バケットを作成するときは、正確なリージョン名を使用する必要があります。地域名では大文字と小文字が区別されます。有効な文字は数字、文字、ハイフンです。
+

NOTE: EU は eu-west-1 のエイリアスとは見なされません。EU または eu-west-1 リージョンを使用する場合は、正確な名前を使用する必要があります。

* いずれかのポリシー (アクティブまたは非アクティブ) に割り当てられているルールで使用されているリージョンを削除または変更することはできません。
* ILM ルールの詳細フィルターとして無効なリージョンを使用する場合、そのルールをポリシーに追加することはできません。
+
ILM ルールでリージョンを詳細フィルタとして使用したが、後でそのリージョンを削除した場合、またはグリッド管理 API を使用してルールを作成し、定義していないリージョンを指定した場合、無効なリージョンが発生する可能性があります。

* S3 バケットを作成するためにリージョンを使用した後にそのリージョンを削除した場合、そのバケット内のオブジェクトを見つけるためにロケーション制約の詳細フィルターを使用する場合は、リージョンを再度追加する必要があります。


.手順
. *ILM* > *リージョン*を選択します。
+
現在定義されているリージョンがリストされた「リージョン」ページが表示されます。  *地域1*はデフォルトの地域を示します。 `us-east-1`変更または削除することはできません。

. 地域を追加するには:
+
.. *別の地域を追加*を選択します。
.. S3 バケットを作成するときに使用するリージョンの名前を入力します。
+
対応する S3 バケットを作成するときは、この正確なリージョン名を LocationConstraint リクエスト要素として使用する必要があります。



. 未使用の領域を削除するには、削除アイコンを選択しますimage:../media/icon-x-to-remove.png["アイコンを削除"]。
+
いずれかのポリシー (アクティブまたは非アクティブ) で現在使用されているリージョンを削除しようとすると、エラー メッセージが表示されます。

. 変更が完了したら、[*保存*] を選択します。
+
ILM ルールの作成ウィザードの手順 1 の [詳細フィルター] セクションからこれらのリージョンを選択できるようになりました。見るlink:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["ILMルールで高度なフィルターを使用する"] 。


