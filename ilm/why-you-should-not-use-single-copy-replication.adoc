---
permalink: ilm/why-you-should-not-use-single-copy-replication.html 
sidebar: sidebar 
keywords: dual commit, single commit, number of copies for replication 
summary: 複製されたコピーを作成するための ILM ルールを作成するときは、配置指示で、どの期間に対しても少なくとも 2 つのコピーを常に指定する必要があります。 
---
= シングルコピーレプリケーションを使用しない理由
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
複製されたコピーを作成するための ILM ルールを作成するときは、配置指示で、どの期間に対しても少なくとも 2 つのコピーを常に指定する必要があります。


NOTE: 任意の期間に複製されたコピーを 1 つだけ作成する ILM ルールは使用しないでください。オブジェクトの複製されたコピーが 1 つしか存在しない場合、ストレージ ノードに障害が発生したり重大なエラーが発生すると、そのオブジェクトは失われます。また、アップグレードなどのメンテナンス手順中は、オブジェクトへのアクセス権が一時的に失われます。

次の例では、「Make 1 Copy」ILM ルールは、オブジェクトの複製されたコピーを 1 つ、3 つのストレージ ノードを含むストレージ プールに配置するように指定します。このルールに一致するオブジェクトが取り込まれると、 StorageGRID は1 つのコピーを 1 つのストレージ ノードにのみ配置します。

image::../media/ilm_replication_make_1_copy.png[ILMレプリケーション コピーを1つ作成]

ILM ルールによってオブジェクトの複製コピーが 1 つだけ作成される場合、ストレージ ノードが使用できない場合、オブジェクトにアクセスできなくなります。この例では、アップグレードやその他のメンテナンス手順中など、ストレージ ノード 2 がオフラインのときは常に、オブジェクト AAA へのアクセス権が一時的に失われます。ストレージ ノード 2 に障害が発生すると、オブジェクト AAA は完全に失われます。

image::../media/ilm_replication_make_1_copy_sn_fails.png[ILMレプリケーションの1コピーSN作成失敗]

オブジェクト データの損失を回避するには、レプリケーションで保護するすべてのオブジェクトの少なくとも 2 つのコピーを常に作成する必要があります。  2 つ以上のコピーが存在する場合、1 つのストレージ ノードに障害が発生したりオフラインになったりしても、オブジェクトにアクセスできます。

image::../media/ilm_replication_make_2_copies_sn_fails.png[ILMレプリケーションで2つのコピーを作成、SNが失敗]
