---
permalink: tenant/grid-federation-clone-keys-with-api.html 
sidebar: sidebar 
keywords: s3 access key, secret key id, account clone, tenant manager api 
summary: テナント アカウントに「グリッド フェデレーション接続の使用」権限がある場合は、テナント管理 API を使用して、ソース グリッドのテナントから宛先グリッドのテナントに S3 アクセス キーを手動で複製できます。 
---
= API を使用して S3 アクセスキーを複製する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
テナント アカウントに *グリッド フェデレーション接続の使用* 権限がある場合は、テナント管理 API を使用して、ソース グリッドのテナントから宛先グリッドのテナントに S3 アクセス キーを手動で複製できます。

.開始する前に
* テナント アカウントには、*グリッド フェデレーション接続の使用* 権限があります。
* グリッド フェデレーション接続の *接続ステータス* は *接続済み* です。
* テナントのソースグリッドのテナントマネージャにサインインするには、link:../admin/web-browser-requirements.html["サポートされているウェブブラウザ"] 。
* あなたは、link:tenant-management-permissions.html["独自のS3認証情報またはルートアクセス権限を管理する"] 。
* ローカル ユーザーのアクセス キーを複製する場合、そのユーザーは両方のグリッドに既に存在します。
+

NOTE: フェデレーション ユーザーの S3 アクセス キーを複製すると、ユーザーと S3 アクセス キーの両方が宛先テナントに追加されます。





== 独自のアクセスキーを複製する

両方のグリッドで同じバケットにアクセスする必要がある場合は、独自のアクセス キーを複製できます。

.手順
. ソースグリッド上のテナントマネージャを使用して、link:creating-your-own-s3-access-keys.html["独自のアクセスキーを作成する"]ダウンロードして `.csv`ファイル。
. テナント マネージャーの上部から、ヘルプ アイコンを選択し、*API ドキュメント* を選択します。
. *s3* セクションで、次のエンドポイントを選択します。
+
`POST /org/users/current-user/replicate-s3-access-key`

+
image::../media/grid-federation-post-current-user-replicate.png[独自のアクセスキーを複製するためのPOSTエンドポイント]

. *試してみる*を選択します。
. *body* テキスト ボックスで、*accessKey* と *secretAccessKey* の例のエントリを、ダウンロードした *.csv* ファイルの値に置き換えます。
+
各文字列を囲む二重引用符を必ず保持してください。

+
image::../media/grid-federation-clone-access-key.png[アクセスキーを複製するための値を入力するテナント マネージャー API]

. キーの有効期限が切れる場合は、*expires*の例のエントリを、ISO 8601データ時間形式の文字列として有効期限の日時で置き換えます（例： `2024-02-28T22:46:33-08:00` ）。キーに有効期限がない場合は、*expires* エントリの値として *null* を入力します (または *Expires* 行とその前のカンマを削除します)。
. *実行*を選択します。
. サーバー応答コードが *204* であることを確認します。これは、キーが宛先グリッドに正常に複製されたことを示します。




== 他のユーザーのアクセスキーを複製する

両方のグリッドで同じバケットにアクセスする必要がある場合は、別のユーザーのアクセス キーを複製できます。

.手順
. ソースグリッド上のテナントマネージャを使用して、link:creating-another-users-s3-access-keys.html["他のユーザーのS3アクセスキーを作成する"]ダウンロードして `.csv`ファイル。
. テナント マネージャーの上部から、ヘルプ アイコンを選択し、*API ドキュメント* を選択します。
. ユーザーIDを取得します。他のユーザーのアクセス キーを複製するには、この値が必要になります。
+
.. *users* セクションから、次のエンドポイントを選択します。
+
`GET /org/users`

.. *試してみる*を選択します。
.. ユーザーを検索するときに使用するパラメータを指定します。
.. *実行*を選択します。
.. キーを複製するユーザーを見つけて、*id* フィールドの番号をコピーします。


. *s3* セクションで、次のエンドポイントを選択します。
+
`POST /org/users/{userId}/replicate-s3-access-key`

+
image::../media/grid-federation-post-other-user.png[他のユーザーのアクセスキーを複製するための POST エンドポイント]

. *試してみる*を選択します。
. *userId* テキスト ボックスに、コピーしたユーザー ID を貼り付けます。
. *本文* テキスト ボックスで、*サンプル アクセス キー* と *シークレット アクセス キー* の例のエントリを、そのユーザーの *.csv* ファイルの値に置き換えます。
+
文字列を囲む二重引用符を必ず保持してください。

. キーの有効期限が切れる場合は、*expires*の例のエントリを、ISO 8601データ時間形式の文字列として有効期限の日時で置き換えます（例： `2023-02-28T22:46:33-08:00` ）。キーに有効期限がない場合は、*expires* エントリの値として *null* を入力します (または *Expires* 行とその前のカンマを削除します)。
. *実行*を選択します。
. サーバー応答コードが *204* であることを確認します。これは、キーが宛先グリッドに正常に複製されたことを示します。

