---
permalink: expand/adding-metadata-capacity.html 
sidebar: sidebar 
keywords: metadata capacity, add, adding, expand, expansion, guidelines, Storage Nodes, metadata storage 
summary: オブジェクト メタデータに十分なスペースを確保するには、各サイトで新しいストレージ ノードを追加する拡張手順を実行する必要がある場合があります。 
---
= メタデータ容量を追加する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
オブジェクト メタデータに十分なスペースを確保するには、各サイトで新しいストレージ ノードを追加する拡張手順を実行する必要がある場合があります。

StorageGRID は、各ストレージ ノードのボリューム 0 にオブジェクト メタデータ用のスペースを予約します。すべてのオブジェクト メタデータの 3 つのコピーが各サイトで保持され、すべてのストレージ ノードに均等に分散されます。

グリッド マネージャを使用すると、ストレージ ノードのメタデータ容量を監視し、メタデータ容量が消費される速度を推定できます。さらに、使用済みのメタデータ領域が特定のしきい値に達すると、ストレージ ノードに対して *メタデータ ストレージ不足* アラートがトリガーされます。

グリッドの使用方法によっては、グリッドのオブジェクト メタデータ容量がオブジェクト ストレージ容量よりも早く消費される可能性があることに注意してください。たとえば、通常、多数の小さなオブジェクトを取り込んだり、大量のユーザー メタデータやタグをオブジェクトに追加したりする場合は、十分なオブジェクト ストレージ容量が残っていても、メタデータ容量を増やすためにストレージ ノードを追加する必要がある場合があります。

詳細については、次を参照してください。

* link:../admin/managing-object-metadata-storage.html["オブジェクトメタデータストレージの管理"]
* link:../monitor/monitoring-storage-capacity.html#monitor-object-metadata-capacity-for-each-storage-node["各ストレージノードのオブジェクトメタデータ容量を監視する"]




== メタデータ容量を増やすためのガイドライン

ストレージ ノードを追加してメタデータ容量を増やす前に、次のガイドラインと制限事項を確認してください。

* 十分なオブジェクト ストレージ容量が利用可能であると仮定すると、オブジェクト メタデータに使用できるスペースが増えるほど、 StorageGRIDシステムに保存できるオブジェクトの数が増えます。
* 各サイトに 1 つ以上のストレージ ノードを追加することで、グリッドのメタデータ容量を増やすことができます。
* 特定のストレージ ノード上のオブジェクト メタデータ用に予約される実際のスペースは、メタデータ予約済みスペース ストレージ オプション (システム全体の設定)、ノードに割り当てられた RAM の量、およびノードのボリューム 0 のサイズによって異なります。
* メタデータはボリューム 0 にのみ保存されるため、既存のストレージ ノードにストレージ ボリュームを追加してメタデータ容量を増やすことはできません。
* 新しいサイトを追加してもメタデータの容量を増やすことはできません。
* StorageGRID は、すべてのオブジェクト メタデータのコピーをサイトごとに 3 つ保持します。このため、システムのメタデータ容量は、最小のサイトのメタデータ容量によって制限されます。
* メタデータ容量を追加する場合は、各サイトに同じ数のストレージ ノードを追加する必要があります。


メタデータのみのストレージ ノードには、特定のハードウェア要件があります。

* StorageGRIDアプライアンスを使用する場合、メタデータ専用ノードは、12 台の 1.9 TB ドライブまたは 12 台の 3.8 TB ドライブを搭載した SGF6112 アプライアンスでのみ構成できます。
* ソフトウェア ベースのノードを使用する場合、メタデータのみのノード リソースは既存のストレージ ノード リソースと一致する必要があります。例えば：
+
** 既存のStorageGRIDサイトが SG6000 または SG6100 アプライアンスを使用している場合、ソフトウェアベースのメタデータのみのノードは次の最小要件を満たしている必要があります。
+
*** 128GBのRAM
*** 8コアCPU
*** Cassandra データベース用の 8 TB SSD または同等のストレージ (rangedb/0)


** 既存のStorageGRIDサイトが 24 GB RAM、8 コア CPU、3 TB または 4 TB のメタデータ ストレージを備えた仮想ストレージ ノードを使用している場合、ソフトウェア ベースのメタデータ専用ノードでは同様のリソース (24 GB RAM、8 コア CPU、4 TB のメタデータ ストレージ (rangedb/0)) を使用する必要があります。


* 新しいStorageGRIDサイトを追加する場合、新しいサイトの合計メタデータ容量は少なくとも既存のStorageGRIDサイトと一致し、新しいサイトのリソースは既存のStorageGRIDサイトのストレージ ノードと一致する必要があります。


参照link:../admin/managing-object-metadata-storage.html["メタデータ予約領域とは何かの説明"]。



== ストレージノードを追加したときにメタデータがどのように再配布されるか

拡張でストレージ ノードを追加すると、 StorageGRID は既存のオブジェクト メタデータを各サイトの新しいノードに再配布し、グリッドの全体的なメタデータ容量が増加します。ユーザーの操作は必要ありません。

次の図は、拡張でストレージ ノードを追加したときにStorageGRID がオブジェクト メタデータを再配布する方法を示しています。図の左側は、拡張前の 3 つのストレージ ノードのボリューム 0 を表しています。メタデータは各ノードの使用可能なメタデータ領域の比較的大きな部分を消費しており、*メタデータ ストレージ不足* アラートがトリガーされました。

図の右側は、2 つのストレージ ノードがサイトに追加された後に既存のメタデータがどのように再配布されるかを示しています。各ノードのメタデータの量が減少し、「メタデータ ストレージ不足」アラートがトリガーされなくなり、メタデータに使用できるスペースが増加しました。

image::../media/metadata_space_after_expansion.png[2つのストレージノードを追加した後に再配布されたメタデータの図]
