---
permalink: expand/deploying-new-grid-nodes.html 
sidebar: sidebar 
keywords: expansion, add nodes 
summary: 拡張で新しいグリッド ノードを展開する手順は、グリッドを最初にインストールしたときに使用した手順と同じです。拡張を実行する前に、すべての新しいグリッド ノードを展開する必要があります。 
---
= 新しいグリッド ノードの導入
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
拡張で新しいグリッド ノードを展開する手順は、グリッドを最初にインストールしたときに使用した手順と同じです。拡張を実行する前に、すべての新しいグリッド ノードを展開する必要があります。

グリッドを展開する場合、追加するノードは既存のノード タイプと一致する必要はありません。  VMware ノード、Linux コンテナベースのノード、またはアプライアンス ノードを追加できます。



== VMware: グリッドノードの展開

拡張で追加する VMware ノードごとに、VMware vSphere に仮想マシンを展開する必要があります。

.手順
. link:../vmware/deploying-storagegrid-node-as-virtual-machine.html["新しいノードを仮想マシンとして展開する"]1 つ以上のStorageGRIDネットワークに接続します。
+
ノードをデプロイするときに、オプションでノード ポートを再マップしたり、CPU またはメモリの設定を増やしたりすることができます。

. すべての新しいVMwareノードを展開したら、link:performing-expansion.html["拡張手順を実行する"] 。




== Linux: グリッドノードのデプロイ

グリッド ノードは、新しい Linux ホストまたは既存の Linux ホストにデプロイできます。グリッドに追加するStorageGRIDノードの CPU、RAM、およびストレージ要件をサポートするために追加の Linux ホストが必要な場合は、最初にインストールしたときにホストを準備したのと同じ方法で準備します。次に、インストール時にグリッド ノードを展開したのと同じ方法で拡張ノードを展開します。

.開始する前に
* お使いの Linux バージョンにStorageGRIDをインストールするための手順があり、ハードウェアとストレージの要件を確認しました。
+
** link:../rhel/index.html["Red Hat Enterprise LinuxにStorageGRIDをインストールする"]
** link:../ubuntu/index.html["UbuntuまたはDebianにStorageGRIDをインストールする"]


* 既存のホストに新しいグリッド ノードを展開する予定の場合は、既存のホストに追加ノード用の十分な CPU、RAM、およびストレージ容量があることを確認します。
* 障害ドメインを最小限に抑える計画があります。たとえば、すべてのゲートウェイ ノードを単一の物理ホストに展開しないでください。
+

CAUTION: 実稼働環境では、単一の物理ホストまたは仮想ホスト上で複数のストレージ ノードを実行しないでください。各ストレージ ノードに専用のホストを使用すると、分離された障害ドメインが提供されます。

* StorageGRIDノードがNetApp ONTAPシステムから割り当てられたストレージを使用する場合は、ボリュームでFabricPool階層化ポリシーが有効になっていないことを確認します。StorageGRIDノードで使用するボリュームでFabricPoolによる階層化を無効にすることで、トラブルシューティングとストレージの処理がシンプルになります。


.手順
. 新しいホストを追加する場合は、 StorageGRIDノードを展開するためのインストール手順にアクセスします。
. 新しいホストを展開するには、ホストの準備の手順に従います。
. ノード構成ファイルを作成し、 StorageGRID構成を検証するには、グリッド ノードのデプロイの手順に従います。
. 新しい Linux ホストにノードを追加する場合は、 StorageGRIDホスト サービスを開始します。
. 既存の Linux ホストにノードを追加する場合は、storagegrid ホスト サービス CLI を使用して新しいノードを起動します。``sudo storagegrid node start [<node name\>]``


.終了後の操作
すべての新しいグリッドノードを展開したら、link:performing-expansion.html["拡張を実行する"] 。



== アプライアンス: ストレージ、ゲートウェイ、または非プライマリ管理ノードの導入

アプライアンス ノードにStorageGRIDソフトウェアをインストールするには、アプライアンスに含まれているStorageGRIDアプライアンス インストーラを使用します。拡張では、各ストレージ アプライアンスは単一のストレージ ノードとして機能し、各サービス アプライアンスは単一のゲートウェイ ノードまたは非プライマリ管理ノードとして機能します。どのアプライアンスも、グリッド ネットワーク、管理ネットワーク、およびクライアント ネットワークに接続できます。

.開始する前に
* アプライアンスはラックまたはキャビネットに設置され、ネットワークに接続され、電源がオンになっています。
* 完了しました https://docs.netapp.com/us-en/storagegrid-appliances/installconfig/configuring-hardware.html["ハードウェアのセットアップ"^]手順。
+
アプライアンス ハードウェアのセットアップには、 StorageGRID接続 (ネットワーク リンクと IP アドレス) を構成するための必須の手順に加えて、ノードの暗号化を有効にし、RAID モードを変更し、ネットワーク ポートを再マッピングするためのオプションの手順も含まれます。

* StorageGRIDアプライアンス インストーラの IP 構成ページにリストされているすべてのグリッド ネットワーク サブネットは、プライマリ管理ノードのグリッド ネットワーク サブネット リストで定義されています。
* 交換用アプライアンスのStorageGRIDアプライアンス インストーラ ファームウェアは、グリッドで現在実行されているStorageGRIDソフトウェア バージョンと互換性があります。バージョンに互換性がない場合は、 StorageGRID Appliance Installer ファームウェアをアップグレードする必要があります。
* サービスラップトップをお持ちで、link:../admin/web-browser-requirements.html["サポートされているウェブブラウザ"] 。
* アプライアンスのコンピューティング コントローラに割り当てられた IP アドレスの 1 つがわかっています。接続されている任意のStorageGRIDネットワークの IP アドレスを使用できます。


.タスク概要
アプライアンス ノードにStorageGRIDをインストールするプロセスには、次のフェーズがあります。

* プライマリ管理ノードの IP アドレスとアプライアンス ノードの名前を指定または確認します。
* インストールを開始し、ボリュームが構成されソフトウェアがインストールされるまで待機します。
+
アプライアンスのインストール タスクの途中で、インストールが一時停止します。インストールを再開するには、グリッド マネージャにサインインし、すべてのグリッド ノードを承認して、 StorageGRIDインストール プロセスを完了します。

+

NOTE: 複数のアプライアンスノードを一度に展開する必要がある場合は、 `configure-sga.py`アプライアンスのインストール スクリプト。



.手順
. ブラウザを開き、アプライアンスのコンピューティング コントローラーの IP アドレスの 1 つを入力します。
+
`https://_Controller_IP_:8443`

+
StorageGRIDアプライアンス インストーラのホーム ページが表示されます。

. *プライマリ管理ノード*接続セクションで、プライマリ管理ノードの IP アドレスを指定する必要があるかどうかを決定します。
+
このデータセンターに以前に他のノードをインストールしたことがある場合、プライマリ管理ノード、または ADMIN_IP が設定された少なくとも 1 つの他のグリッド ノードが同じサブネット上に存在すると想定して、 StorageGRIDアプライアンス インストーラはこの IP アドレスを自動的に検出できます。

. この IP アドレスが表示されない場合、または変更する必要がある場合は、アドレスを指定します。
+
[cols="1a,2a"]
|===
| オプション | 説明 


 a| 
手動IP入力
 a| 
.. *管理ノードの検出を有効にする*チェックボックスをオフにします。
.. IPアドレスを手動で入力します。
.. *保存*をクリックします。
.. 新しい IP アドレスの接続状態が準備完了になるまで待ちます。




 a| 
接続されているすべてのプライマリ管理ノードの自動検出
 a| 
.. *管理ノードの検出を有効にする*チェックボックスを選択します。
.. 検出された IP アドレスのリストが表示されるまで待ちます。
.. このアプライアンス ストレージ ノードがデプロイされるグリッドのプライマリ管理ノードを選択します。
.. *保存*をクリックします。
.. 新しい IP アドレスの接続状態が準備完了になるまで待ちます。


|===
. *ノード名* フィールドに、このアプライアンス ノードに使用する名前を入力し、*保存* を選択します。
+
ノード名は、 StorageGRIDシステム内のこのアプライアンス ノードに割り当てられます。これは、グリッド マネージャーの [ノード] ページ ([概要] タブ) に表示されます。必要に応じて、ノードを承認するときに名前を変更できます。

. *インストール* セクションで、現在の状態が「プライマリ管理ノード _admin_ip_ を使用してグリッドに _node name_ のインストールを開始する準備ができました」であり、*インストールの開始* ボタンが有効になっていることを確認します。
+
*インストールの開始*ボタンが有効になっていない場合は、ネットワーク構成またはポート設定を変更する必要がある可能性があります。手順については、アプライアンスのメンテナンス手順を参照してください。

. StorageGRIDアプライアンス インストーラのホームページから、[インストールの開始] を選択します。
+
image::../media/appliance_installer_home_start_installation_enabled.gif[この画像は周囲のテキストで説明されています。]

+
現在の状態が「インストールが進行中」に変わり、インストールの監視ページが表示されます。

. 拡張に複数のアプライアンス ノードが含まれている場合は、アプライアンスごとに前の手順を繰り返します。
+

NOTE: 複数のアプライアンス ストレージ ノードを一度にデプロイする必要がある場合は、configure-sga.py アプライアンス インストール スクリプトを使用してインストール プロセスを自動化できます。

. モニターのインストール ページに手動でアクセスする必要がある場合は、メニュー バーから *モニターのインストール* を選択します。
+
モニターのインストール ページには、インストールの進行状況が表示されます。

+
image::../media/monitor_installation_configure_storage.gif[この図には説明が付随しています。]

+
青いステータス バーは、現在進行中のタスクを示します。緑色のステータス バーは、タスクが正常に完了したことを示します。

+

NOTE: インストーラーは、以前のインストールで完了したタスクが再実行されないようにします。インストールを再実行する場合、再実行する必要のないタスクは緑色のステータス バーと「スキップ済み」のステータスで表示されます。

. 最初の 2 つのインストール段階の進行状況を確認します。
+
*1.アプライアンスを構成する*

+
この段階では、次のいずれかのプロセスが発生します。

+
** ストレージ アプライアンスの場合、インストーラーはストレージ コントローラーに接続し、既存の構成をクリアし、 SANtricity OS と通信してボリュームを構成し、ホスト設定を構成します。
** サービス アプライアンスの場合、インストーラーはコンピューティング コントローラー内のドライブから既存の構成をすべてクリアし、ホスト設定を構成します。
+
*2.  OSをインストール*

+
この段階では、インストーラーはStorageGRIDの基本オペレーティング システム イメージをアプライアンスにコピーします。



. コンソール ウィンドウに、グリッド マネージャーを使用してノードを承認するように求めるメッセージが表示されるまで、インストールの進行状況の監視を続けます。
+

NOTE: グリッド マネージャーに移動してノードを承認する前に、この拡張で追加したすべてのノードが承認の準備ができるまで待機します。

+
image::../media/monitor_installation_install_sgws.gif[この図には説明が付随しています。]


