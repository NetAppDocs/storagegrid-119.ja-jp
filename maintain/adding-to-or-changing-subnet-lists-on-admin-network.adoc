---
permalink: maintain/adding-to-or-changing-subnet-lists-on-admin-network.html 
sidebar: sidebar 
keywords: storagegrid, subnet list, admin network 
summary: 1 つ以上のノードの管理ネットワーク サブネット リスト内のサブネットを追加、削除、または変更できます。 
---
= 管理ネットワークのサブネットリストを追加または変更する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
1 つ以上のノードの管理ネットワーク サブネット リスト内のサブネットを追加、削除、または変更できます。

.開始する前に
* あなたは `Passwords.txt`ファイル。


管理ネットワーク サブネット リストのすべてのノードに対してサブネットを追加、削除、または変更できます。

[NOTE]
====
どのノードのグリッド ネットワーク、管理ネットワーク、またはクライアント ネットワークにも、次の IPv4 アドレスを含むサブネットを使用しないでください。

* 192,168,130,101
* 192,168,131,101
* 192,168,130,102
* 192,168,131,102
* 198.51.100.2
* 198.51.100.4


たとえば、どのノードのグリッド ネットワーク、管理ネットワーク、またはクライアント ネットワークにも次のサブネット範囲を使用しないでください。

* 192.168.130.0/24 は、このサブネット範囲に IP アドレス 192.168.130.101 と 192.168.130.102 が含まれているためです。
* 192.168.131.0/24 は、このサブネット範囲に IP アドレス 192.168.131.101 と 192.168.131.102 が含まれているためです。
* 198.51.100.0/24 は、このサブネット範囲に IP アドレス 198.51.100.2 と 198.51.100.4 が含まれているためです。


====
.手順
. プライマリ管理ノードにログインします。
+
.. 次のコマンドを入力します。 `ssh admin@_primary_Admin_Node_IP_`
.. 記載されているパスワードを入力してください `Passwords.txt`ファイル。
.. ルートに切り替えるには、次のコマンドを入力します。 `su -`
.. 記載されているパスワードを入力してください `Passwords.txt`ファイル。


+
ルートとしてログインすると、プロンプトは `$`に `#`。

. 次のコマンドを入力して、IP 変更ツールを起動します。 `change-ip`
. プロンプトでプロビジョニング パスフレーズを入力します。
+
メインメニューが表示されます。

+
image::../media/change_ip_tool_main_menu.png[IP変更ツールのウェルカム画面を示すスクリーンショット]

. 必要に応じて、操作が実行されるネットワーク/ノードを制限します。次のいずれかを選択します。
+
** 操作を実行する特定のノードをフィルタリングする場合は、*1* を選択して編集するノードを選択します。次のいずれかのオプションを選択します。
+
*** *1*: 単一ノード（名前で選択）
*** *2*: 単一ノード（サイト別に選択し、次に名前別に選択）
*** *3*: 単一ノード（現在のIPで選択）
*** *4*: サイト内のすべてのノード
*** *5*: グリッド内のすべてのノード
*** *0*: 戻る


** 「すべて」を選択したままにします。選択するとメインメニュー画面が表示されます。  「選択されたノード」フィールドには新しい選択内容が反映され、選択されたすべての操作はこの項目に対してのみ実行されるようになります。


. メイン メニューで、管理ネットワークのサブネットを編集するオプション (オプション *3*) を選択します。
. 次のいずれかを選択します。
+
--
** 次のコマンドを入力してサブネットを追加します。 `add CIDR`
** 次のコマンドを入力してサブネットを削除します。 `del CIDR`
** 次のコマンドを入力してサブネットのリストを設定します。 `set CIDR`


--
+
--

NOTE: すべてのコマンドでは、次の形式を使用して複数のアドレスを入力できます。 `add CIDR, CIDR`

例： `add 172.14.0.0/16, 172.15.0.0/16, 172.16.0.0/16`


TIP: 「上矢印」を使用して以前に入力した値を現在の入力プロンプトに呼び出し、必要に応じて編集することで、必要な入力量を減らすことができます。

以下の入力例は、管理ネットワーク サブネット リストにサブネットを追加する方法を示しています。

image::../media/change_ip_tool_aesl_sample_input.gif[IP変更ツール（AESL）の例]

--
. 準備ができたら、*q* と入力してメイン メニュー画面に戻ります。変更はクリアまたは適用されるまで保持されます。
+

NOTE: 手順 2 で「すべての」ノード選択モードのいずれかを選択した場合は、*Enter* (q* なし) を押して、リスト内の次のノードに移動します。

. 次のいずれかを選択します。
+
** オプション *5* を選択すると、変更された項目のみが表示されるように分離された出力で編集内容が表示されます。以下の出力例に示すように、変更は緑色 (追加) または赤色 (削除) で強調表示されます。
+
image::../media/change_ip_tool_aesl_sample_output.png[周囲のテキストで説明されているスクリーンショット]

** 完全な構成を表示する出力に編集内容を表示するには、オプション *6* を選択します。変更は緑色 (追加) または赤色 (削除) で強調表示されます。  *注:* 一部のターミナル エミュレーターでは、追加や削除が取り消し線書式を使用して表示される場合があります。
+
サブネット リストを変更しようとすると、次のメッセージが表示されます。

+
[listing]
----
CAUTION: The Admin Network subnet list on the node might contain /32 subnets derived from automatically applied routes that aren't persistent. Host routes (/32 subnets) are applied automatically if the IP addresses provided for external services such as NTP or DNS aren't reachable using default StorageGRID routing, but are reachable using a different interface and gateway. Making and applying changes to the subnet list will make all automatically applied subnets persistent. If you don't want that to happen, delete the unwanted subnets before applying changes. If you know that all /32 subnets in the list were added intentionally, you can ignore this caution.
----
+
NTP および DNS サーバのサブネットをネットワークに明示的に割り当てていない場合、 StorageGRID は接続用のホスト ルート (/32) を自動的に作成します。たとえば、DNS サーバーまたは NTP サーバーへの送信接続に /16 または /24 ルートを使用したい場合は、自動的に作成された /32 ルートを削除し、必要なルートを追加する必要があります。自動的に作成されたホスト ルートを削除しない場合は、サブネット リストに変更を適用した後もそのルートが保持されます。



+

NOTE: 自動的に検出されたホスト ルートを使用することもできますが、通常は、接続を確保するために DNS ルートと NTP ルートを手動で構成する必要があります。

. すべてのステージングされた変更を検証するには、オプション *7* を選択します。
+
この検証により、重複するサブネットの使用など、グリッド、管理、およびクライアント ネットワークのルールが遵守されていることが確認されます。

. 必要に応じて、オプション *8* を選択して、段階的に行われたすべての変更を保存し、後で戻って変更を続行します。
+
このオプションを使用すると、適用されていない変更を失うことなく、IP 変更ツールを終了し、後で再度起動することができます。

. 次のいずれかを実行します。
+
** 新しいネットワーク構成を保存または適用せずにすべての変更をクリアする場合は、オプション *9* を選択します。
** 変更を適用して新しいネットワーク構成をプロビジョニングする準備ができたら、オプション *10* を選択します。プロビジョニング中、次の出力例に示すように、更新が適用されると出力にステータスが表示されます。
+
[listing]
----
Generating new grid networking description file...

Running provisioning...

Updating grid network configuration on Name
----


. グリッド マネージャーから新しいリカバリ パッケージをダウンロードします。
+
.. *メンテナンス* > *システム* > *回復パッケージ*を選択します。
.. プロビジョニング パスフレーズを入力します。



