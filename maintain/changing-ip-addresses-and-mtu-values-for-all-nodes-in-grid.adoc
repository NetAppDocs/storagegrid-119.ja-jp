---
permalink: maintain/changing-ip-addresses-and-mtu-values-for-all-nodes-in-grid.html 
sidebar: sidebar 
keywords: storagegrid, node ip address, change node ip, change node ip address, changing node ip, changing node ip address 
summary: グリッド内のすべてのノードのグリッド ネットワーク IP アドレスを変更する必要がある場合は、この特別な手順に従う必要があります。個々のノードを変更する手順を使用して、グリッド全体のグリッド ネットワーク IP を変更することはできません。 
---
= グリッド内のすべてのノードのIPアドレスを変更する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
グリッド内のすべてのノードのグリッド ネットワーク IP アドレスを変更する必要がある場合は、この特別な手順に従う必要があります。個々のノードを変更する手順を使用して、グリッド全体のグリッド ネットワーク IP を変更することはできません。

.開始する前に
* あなたは `Passwords.txt`ファイル。


グリッドが正常に起動するようにするには、すべての変更を同時に行う必要があります。


NOTE: この手順はグリッド ネットワークにのみ適用されます。この手順を使用して、管理ネットワークまたはクライアント ネットワークの IP アドレスを変更することはできません。

1つのサイトのノードのIPアドレスとMTUのみを変更する場合は、link:changing-nodes-network-configuration.html["ノードネットワーク構成を変更する"]説明書。

.手順
. DNS または NTP の変更、シングル サインオン (SSO) 構成の変更 (使用している場合) など、IP 変更ツールの外部で行う必要がある変更を事前に計画します。
+

NOTE: 既存の NTP サーバーが新しい IP アドレス上のグリッドにアクセスできない場合は、change-ip 手順を実行する前に新しい NTP サーバーを追加します。

+

NOTE: 既存の DNS サーバーが新しい IP アドレス上のグリッドにアクセスできない場合は、IP 変更手順を実行する前に新しい DNS サーバーを追加します。

+

NOTE: StorageGRIDシステムで SSO が有効になっていて、証明書利用者信頼が管理ノードの IP アドレス (推奨されている完全修飾ドメイン名ではなく) を使用して構成されている場合は、IP アドレスを変更した直後に Active Directory フェデレーション サービス (AD FS) でこれらの証明書利用者信頼を更新または再構成する準備をしてください。見るlink:../admin/configuring-sso.html["シングルサインオンを構成する"] 。

+

NOTE: 必要に応じて、新しい IP アドレスの新しいサブネットを追加します。

. プライマリ管理ノードにログインします。
+
.. 次のコマンドを入力します。 `ssh admin@_primary_Admin_Node_IP_`
.. 記載されているパスワードを入力してください `Passwords.txt`ファイル。
.. ルートに切り替えるには、次のコマンドを入力します。 `su -`
.. 記載されているパスワードを入力してください `Passwords.txt`ファイル。


+
ルートとしてログインすると、プロンプトは `$`に `#`。

. 次のコマンドを入力して、IP 変更ツールを起動します。 `change-ip`
. プロンプトでプロビジョニング パスフレーズを入力します。
+
メインメニューが表示されます。デフォルトでは、 `Selected nodes`フィールドは `all`。

+
image::../media/change_ip_tool_main_menu.png[IP変更ツールのウェルカム画面を示すスクリーンショット]

. メイン メニューで *2* を選択して、すべてのノードの IP/サブネット マスク、ゲートウェイ、および MTU 情報を編集します。
+
.. グリッド ネットワークに変更を加えるには、*1* を選択します。
+
選択すると、プロンプトにノード名、グリッド ネットワーク名、データ タイプ (IP/マスク、ゲートウェイ、または MTU)、および現在の値が表示されます。

+
DHCP が設定されたインターフェースの IP アドレス、プレフィックス長、ゲートウェイ、または MTU を編集すると、インターフェースは静的に変更されます。  DHCP によって設定される各インターフェースの前に警告が表示されます。

+
インターフェースの設定 `fixed`編集できません。

.. 新しい値を設定するには、現在の値に表示されている形式で入力します。
.. 変更したいすべてのノードを編集した後、*q* と入力してメイン メニューに戻ります。
+
変更はクリアまたは適用されるまで保持されます。



. 次のいずれかのオプションを選択して変更内容を確認します。
+
** *5*: 変更された項目のみを表示するように分離された出力内の編集を表示します。変更は、出力例に示すように、緑色 (追加) または赤色 (削除) で強調表示されます。
+
image::../media/change_ip_tool_edit_ip_mask_sample_output.png[周囲のテキストで説明されているスクリーンショット]

** *6*: 完全な構成を表示する出力に編集内容を表示します。変更は緑色 (追加) または赤色 (削除) で強調表示されます。
+

NOTE: 特定のコマンド ライン インターフェイスでは、追加や削除が取り消し線形式を使用して表示される場合があります。適切な表示は、必要な VT100 エスケープ シーケンスをサポートしている端末クライアントに依存します。



. すべての変更を検証するには、オプション *7* を選択します。
+
この検証により、重複するサブネットを使用しないなどのグリッド ネットワークのルールに違反しないことが保証されます。

+
この例では、検証でエラーが返されました。

+
image::../media/change_ip_tool_validate_sample_error_messages.gif[周囲のテキストで説明されているスクリーンショット]

+
この例では、検証は合格しました。

+
image::../media/change_ip_tool_validate_sample_passed_messages.gif[周囲のテキストで説明されているスクリーンショット]

. 検証に合格したら、*10* を選択して新しいネットワーク構成を適用します。
. 次回ノードを再起動したときに変更を適用するには、「ステージ」を選択します。
+

NOTE: *ステージ*を選択する必要があります。手動で、または *stage* ではなく *apply* を選択して、ローリング再起動を実行しないでください。グリッドは正常に起動しません。

. 変更が完了したら、「*0*」を選択して IP 変更ツールを終了します。
. すべてのノードを同時にシャットダウンします。
+

NOTE: すべてのノードが同時にダウンするように、グリッド全体をシャットダウンする必要があります。

. 必要な物理または仮想ネットワークの変更を行います。
. すべてのグリッド ノードがダウンしていることを確認します。
. すべてのノードの電源をオンにします。
. グリッドが正常に起動したら:
+
.. 新しい NTP サーバーを追加した場合は、古い NTP サーバーの値を削除します。
.. 新しい DNS サーバーを追加した場合は、古い DNS サーバーの値を削除します。


. グリッド マネージャーから新しいリカバリ パッケージをダウンロードします。
+
.. *メンテナンス* > *システム* > *回復パッケージ*を選択します。
.. プロビジョニング パスフレーズを入力します。




.関連情報
* link:adding-to-or-changing-subnet-lists-on-grid-network.html["グリッドネットワーク上のサブネットリストを追加または変更する"]
* link:shutting-down-grid-node.html["グリッドノードをシャットダウンする"]

