---
permalink: rhel/storage-and-performance-requirements.html 
sidebar: sidebar 
keywords: red hat linux storage requirements, performance requirements host storage, host volumes, netapp ontap, fabricpool 
summary: 初期構成と将来のストレージ拡張をサポートするために十分なスペースを提供できるように、 StorageGRIDノードのストレージ要件を理解する必要があります。 
---
= ストレージとパフォーマンスの要件
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
初期構成と将来のストレージ拡張をサポートするために十分なスペースを提供できるように、 StorageGRIDノードのストレージ要件を理解する必要があります。

StorageGRIDノードには、次の 3 つの論理カテゴリのストレージが必要です。

* *コンテナ プール* - ノード コンテナのパフォーマンス層 (10K SAS または SSD) ストレージ。これは、 StorageGRIDノードをサポートするホストにコンテナ エンジンをインストールして構成するときに、コンテナ エンジン ストレージ ドライバーに割り当てられます。
* *システム データ* - StorageGRIDホスト サービスが消費し、個々のノードにマップするシステム データとトランザクション ログのノードごとの永続ストレージ用のパフォーマンス層 (10K SAS または SSD) ストレージ。
* *オブジェクト データ* - オブジェクト データとオブジェクト メタデータの永続的なストレージ用のパフォーマンス層 (10K SAS または SSD) ストレージと容量層 (NL-SAS/SATA) バルク ストレージ。


すべてのストレージ カテゴリで RAID 対応ブロック デバイスを使用する必要があります。非冗長ディスク、SSD、または JBOD はサポートされていません。どのストレージ カテゴリでも共有ストレージまたはローカル RAID ストレージを使用できますが、 StorageGRIDのノード移行機能を使用する場合は、システム データとオブジェクト データの両方を共有ストレージに保存する必要があります。詳細については、以下を参照してください。 link:node-container-migration-requirements.html["ノードコンテナの移行要件"] 。



== パフォーマンス要件

コンテナ プール、システム データ、およびオブジェクト メタデータに使用されるボリュームのパフォーマンスは、システム全体のパフォーマンスに大きな影響を与えます。レイテンシ、1 秒あたりの入出力操作 (IOPS)、およびスループットの点で適切なディスク パフォーマンスを確保するには、これらのボリュームにパフォーマンス層 (10K SAS または SSD) のストレージを使用する必要があります。オブジェクト データの永続ストレージには、容量層 (NL-SAS/SATA) ストレージを使用できます。

コンテナ プール、システム データ、およびオブジェクト データに使用されるボリュームでは、ライトバック キャッシュが有効になっている必要があります。キャッシュは保護されたメディアまたは永続的なメディア上に存在する必要があります。



== NetApp ONTAPストレージを使用するホストの要件

StorageGRIDノードがNetApp ONTAPシステムから割り当てられたストレージを使用する場合は、ボリュームでFabricPool階層化ポリシーが有効になっていないことを確認します。StorageGRIDノードで使用するボリュームでFabricPoolによる階層化を無効にすることで、トラブルシューティングとストレージの処理がシンプルになります。


NOTE: FabricPoolを使用してStorageGRIDに関連するデータをStorageGRID自体に階層化することは絶対にしないでください。StorageGRIDにStorageGRIDデータを階層化すると、トラブルシューティングと運用がより複雑になります。



== 必要なホストの数

各StorageGRIDサイトには、少なくとも 3 つのストレージ ノードが必要です。


NOTE: 実稼働環境では、単一の物理ホストまたは仮想ホスト上で複数のストレージ ノードを実行しないでください。各ストレージ ノードに専用のホストを使用すると、分離された障害ドメインが提供されます。

管理ノードやゲートウェイ ノードなどの他のタイプのノードは、同じホストにデプロイすることも、必要に応じて専用のホストにデプロイすることもできます。



== 各ホストのストレージボリュームの数

次の表は、各ホストに必要なストレージ ボリューム (LUN) の数と、そのホストに展開されるノードに基づいて、各 LUN に必要な最小サイズを示しています。

テストされた最大 LUN サイズは 39 TB です。


NOTE: これらの数値はグリッド全体の数値ではなく、ホストごとの数値です。

|===
| LUNの用途 | ストレージカテゴリ | LUNの数 | 最小サイズ/LUN 


 a| 
コンテナエンジンストレージプール
 a| 
コンテナプール
 a| 
1
 a| 
ノード総数 × 100 GB



 a| 
`/var/local`音量
 a| 
システムデータ
 a| 
このホスト上の各ノードに1つ
 a| 
90 GB



 a| 
ストレージ ノード
 a| 
オブジェクトデータ
 a| 
このホスト上のストレージノードごとに3つ

*注:* ソフトウェア ベースのストレージ ノードには 1 ～ 48 個のストレージ ボリュームを設定できます。少なくとも 3 個のストレージ ボリュームを設定することをお勧めします。
 a| 
12 TB (4 TB/LUN) 参照<<storage_req_SN,ストレージノードのストレージ要件>>詳細についてはこちらをご覧ください。



 a| 
ストレージノード（メタデータのみ）
 a| 
オブジェクトメタデータ
 a| 
1
 a| 
4 TB 参照<<storage_req_SN,ストレージノードのストレージ要件>>詳細についてはこちらをご覧ください。

*注*: メタデータのみのストレージ ノードに必要な rangedb は 1 つだけです。



 a| 
管理ノード監査ログ
 a| 
システムデータ
 a| 
このホスト上の管理ノードごとに1つ
 a| 
200 GB



 a| 
管理ノードテーブル
 a| 
システムデータ
 a| 
このホスト上の管理ノードごとに1つ
 a| 
200 GB

|===

NOTE: 設定されている監査レベル、S3 オブジェクトキー名などのユーザー入力のサイズ、保存する必要がある監査ログデータの量に応じて、各管理ノードの監査ログ LUN のサイズを増やす必要がある場合があります。通常、グリッドは S3 操作ごとに約 1 KB の監査データを生成します。つまり、200 GB の LUN では、1 日あたり 7,000 万回の操作、または 2 ～ 3 日間で 1 秒あたり 800 回の操作をサポートできることになります。



== ホストの最小ストレージ容量

次の表は、各タイプのノードに必要な最小ストレージ容量を示しています。この表を使用すると、ホストにどのノードが展開されるかに基づいて、各ストレージ カテゴリでホストに提供する必要があるストレージの最小量を決定できます。


NOTE: ディスク スナップショットを使用してグリッド ノードを復元することはできません。代わりに、link:../maintain/warnings-and-considerations-for-grid-node-recovery.html["グリッドノードの回復"]各タイプのノードの手順。

|===
| ノードの種類 | コンテナプール | システムデータ | オブジェクトデータ 


| ストレージ ノード  a| 
100 GB
 a| 
90 GB
 a| 
4,000 GB



 a| 
管理ノード
 a| 
100 GB
 a| 
490 GB (3 LUN)
 a| 
_適用できない_



 a| 
ゲートウェイ ノード
 a| 
100 GB
 a| 
90 GB
 a| 
_適用できない_

|===


== 例: ホストのストレージ要件の計算

同じホストに 3 つのノード (ストレージ ノード 1 つ、管理ノード 1 つ、ゲートウェイ ノード 1 つ) を展開する予定であるとします。ホストには少なくとも 9 つのストレージ ボリュームを提供する必要があります。ノード コンテナーには最低 300 GB のパフォーマンス層ストレージ、システム データとトランザクション ログには 670 GB のパフォーマンス層ストレージ、オブジェクト データには 12 TB の容量層ストレージが必要です。

|===
| ノードの種類 | LUNの用途 | LUNの数 | LUNサイズ 


| ストレージ ノード  a| 
コンテナエンジンストレージプール
 a| 
1
 a| 
300 GB（100 GB/ノード）



 a| 
ストレージ ノード
 a| 
`/var/local`音量
 a| 
1
 a| 
90 GB



| ストレージ ノード  a| 
オブジェクトデータ
 a| 
3
 a| 
12 TB (4 TB/LUN)



 a| 
管理ノード
 a| 
`/var/local`音量
 a| 
1
 a| 
90 GB



| 管理ノード  a| 
管理ノード監査ログ
 a| 
1
 a| 
200 GB



| 管理ノード  a| 
管理ノードテーブル
 a| 
1
 a| 
200 GB



 a| 
ゲートウェイ ノード
 a| 
`/var/local`音量
 a| 
1
 a| 
90 GB



 a| 
*合計*
 a| 
 a| 
*9*
 a| 
*コンテナプール:* 300 GB

*システムデータ:* 670 GB

*オブジェクトデータ:* 12,000 GB

|===


== ストレージノードのストレージ要件

ソフトウェア ベースのストレージ ノードには 1 ～ 48 個のストレージ ボリュームを設定できますが、3 個以上のストレージ ボリュームが推奨されます。各ストレージ ボリュームは 4 TB 以上である必要があります。


NOTE: アプライアンス ストレージ ノードには最大 48 個のストレージ ボリュームも設定できます。

図に示すように、 StorageGRID は各ストレージ ノードのストレージ ボリューム 0 にオブジェクト メタデータ用のスペースを予約します。ストレージ ボリューム 0 およびストレージ ノード内のその他のストレージ ボリュームの残りのスペースは、オブジェクト データ専用に使用されます。

image::../media/metadata_space_storage_node.png[メタデータスペースストレージノード]

冗長性を提供し、オブジェクト メタデータの損失を防ぐために、 StorageGRID はシステム内のすべてのオブジェクトのメタデータのコピーを各サイトに 3 つ保存します。オブジェクト メタデータの 3 つのコピーは、各サイトのすべてのストレージ ノードに均等に分散されます。

メタデータのみのストレージ ノードを含むグリッドをインストールする場合、グリッドにはオブジェクト ストレージ用の最小数のノードも含まれている必要があります。見るlink:../primer/what-storage-node-is.html#types-of-storage-nodes["ストレージノードの種類"]メタデータのみのストレージ ノードの詳細については、こちらをご覧ください。

* 単一サイト グリッドの場合、オブジェクトとメタデータ用に少なくとも 2 つのストレージ ノードが構成されます。
* マルチサイト グリッドの場合、オブジェクトとメタデータ用にサイトごとに少なくとも 1 つのストレージ ノードが構成されます。


新しいストレージ ノードのボリューム 0 にスペースを割り当てるときは、すべてのオブジェクト メタデータのそのノードの部分に十分なスペースがあることを確認する必要があります。

* 少なくとも、ボリューム 0 には 4 TB を割り当てる必要があります。
+

NOTE: ストレージ ノードに 1 つのストレージ ボリュームのみを使用し、そのボリュームに 4 TB 以下を割り当てた場合、ストレージ ノードは起動時にストレージ読み取り専用状態になり、オブジェクトのメタデータのみを保存する可能性があります。

+

NOTE: ボリューム 0 (非本番環境のみ) に 500 GB 未満を割り当てると、ストレージ ボリュームの容量の 10% がメタデータ用に予約されます。

* ソフトウェア ベースのメタデータのみのノード リソースは、既存のストレージ ノード リソースと一致する必要があります。例えば：
+
** 既存のStorageGRIDサイトが SG6000 または SG6100 アプライアンスを使用している場合、ソフトウェアベースのメタデータのみのノードは次の最小要件を満たしている必要があります。
+
*** 128GBのRAM
*** 8コアCPU
*** Cassandra データベース用の 8 TB SSD または同等のストレージ (rangedb/0)


** 既存のStorageGRIDサイトが 24 GB RAM、8 コア CPU、3 TB または 4 TB のメタデータ ストレージを備えた仮想ストレージ ノードを使用している場合、ソフトウェア ベースのメタデータ専用ノードでは同様のリソース (24 GB RAM、8 コア CPU、4 TB のメタデータ ストレージ (rangedb/0)) を使用する必要があります。
+
新しいStorageGRIDサイトを追加する場合、新しいサイトの合計メタデータ容量は少なくとも既存のStorageGRIDサイトと一致し、新しいサイトのリソースは既存のStorageGRIDサイトのストレージ ノードと一致する必要があります。



* 新しいシステム (StorageGRID 11.6 以降) をインストールしていて、各ストレージ ノードに 128 GB 以上の RAM がある場合は、ボリューム 0 に 8 TB 以上を割り当てます。ボリューム 0 に大きな値を使用すると、各ストレージ ノード上のメタデータに許可されるスペースを増やすことができます。
* サイトに異なるストレージ ノードを構成する場合は、可能であればボリューム 0 に同じ設定を使用します。サイトに異なるサイズのストレージ ノードが含まれている場合、最も小さいボリューム 0 を持つストレージ ノードによってそのサイトのメタデータ容量が決まります。


詳細については、link:../admin/managing-object-metadata-storage.html["オブジェクトメタデータストレージの管理"] 。
