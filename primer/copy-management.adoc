---
permalink: primer/copy-management.html 
sidebar: sidebar 
keywords: object data, ilm policy, ilm rules, replicated copy, replication, erasure-coded copy, ec, cloud storage pool 
summary: オブジェクト データは、アクティブな ILM ポリシーとその ILM ルールによって管理されます。  ILM ルールは、オブジェクト データの損失を防ぐために、複製または消去コード化されたコピーを作成します。 
---
= コピー管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
オブジェクト データは、アクティブな ILM ポリシーと関連する ILM ルールによって管理されます。  ILM ルールは、オブジェクト データの損失を防ぐために、複製または消去コード化されたコピーを作成します。

オブジェクトの存続期間中、さまざまな時点で、さまざまなタイプまたは場所のオブジェクト コピーが必要になる場合があります。  ILM ルールは定期的に評価され、オブジェクトが必要に応じて配置されていることを確認します。

オブジェクト データは LDR サービスによって管理されます。



== コンテンツ保護：レプリケーション

ILM ルールのコンテンツ配置指示でオブジェクト データの複製コピーが必要な場合は、構成されたストレージ プールを構成するストレージ ノードによってコピーが作成され、ディスクに保存されます。

LDR サービスの ILM エンジンはレプリケーションを制御し、正しい数のコピーが正しい場所に正しい期間保存されるようにします。

image::../media/replication_data_flow.png[周囲のテキストで説明されているプロセスを示す図]

. ILM エンジンは ADC サービスにクエリを実行し、ILM ルールで指定されたストレージ プール内で最適な宛先 LDR サービスを決定します。次に、その LDR サービスにレプリケーションを開始するコマンドを送信します。
. 宛先 LDR サービスは、最適なソースの場所を ADC サービスに照会します。次に、ソース LDR サービスにレプリケーション要求を送信します。
. ソース LDR サービスは、コピーを宛先 LDR サービスに送信します。
. 宛先 LDR サービスは、オブジェクト データが保存されたことを ILM エンジンに通知します。
. ILM エンジンは、オブジェクトの場所のメタデータを使用してメタデータ ストアを更新します。




== コンテンツ保護：消失訂正符号

ILM ルールにオブジェクト データの消去コード化コピーを作成する指示が含まれている場合、適用可能な消去コード化スキームによってオブジェクト データがデータ フラグメントとパリティ フラグメントに分割され、これらのフラグメントが消去コード化プロファイルで構成されているストレージ ノード全体に分散されます。

LDR サービスのコンポーネントである ILM エンジンは、消去コーディングを制御し、消去コーディング プロファイルがオブジェクト データに適用されるようにします。

image::../media/erasure_coding_data_flow.png[消失訂正符号化データフロー]

. ILM エンジンは ADC サービスにクエリを実行し、どの DDS サービスが消去符号化操作を最も適切に実行できるかを判断します。決定されると、ILM エンジンはそのサービスに「開始」要求を送信します。
. DDS サービスは、LDR にオブジェクト データを消去コード化するように指示します。
. ソース LDR サービスは、消失訂正コーディング用に選択された LDR サービスにコピーを送信します。
. 適切な数のパリティ フラグメントとデータ フラグメントを作成した後、LDR サービスは、これらのフラグメントを、消去コーディング プロファイルのストレージ プールを構成するストレージ ノード (チャンク サービス) 全体に分散します。
. LDR サービスは ILM エンジンに通知し、オブジェクト データが正常に配布されたことを確認します。
. ILM エンジンは、オブジェクトの場所のメタデータを使用してメタデータ ストアを更新します。




== コンテンツ保護: クラウド ストレージ プール

ILM ルールのコンテンツ配置指示で、オブジェクト データの複製されたコピーをクラウド ストレージ プールに保存する必要がある場合、オブジェクト データはクラウド ストレージ プールに指定された外部の S3 バケットまたは Azure Blob ストレージ コンテナーに複製されます。

LDR サービスのコンポーネントである ILM エンジンと Data Mover サービスは、クラウド ストレージ プールへのオブジェクトの移動を制御します。

image::../media/cloud_storage_pool_data_flow.png[クラウドストレージプールのデータフロー]

. ILM エンジンは、クラウド ストレージ プールにレプリケートするデータ ムーバー サービスを選択します。
. Data Mover サービスは、オブジェクト データを Cloud Storage Pool に送信します。
. Data Mover サービスは、オブジェクト データが保存されたことを ILM エンジンに通知します。
. ILM エンジンは、オブジェクトの場所のメタデータを使用してメタデータ ストアを更新します。

