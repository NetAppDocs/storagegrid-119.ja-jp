---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: '情報ライフサイクル管理 (ILM) を使用して、 StorageGRIDシステム内のすべてのオブジェクトの配置、期間、および取り込み動作を制御します。ILM ルールは、 StorageGRID が時間の経過とともにオブジェクトを保存する方法を決定します。1 つ以上の ILM ルールを設定し、それらを ILM ポリシーに追加します。' 
---
= 情報ライフサイクル管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
情報ライフサイクル管理 (ILM) を使用して、 StorageGRIDシステム内のすべてのオブジェクトの配置、期間、および取り込み動作を制御します。ILM ルールは、 StorageGRID が時間の経過とともにオブジェクトを保存する方法を決定します。1 つ以上の ILM ルールを設定し、それらを ILM ポリシーに追加します。グリッドには、一度に複数のアクティブなポリシーを設定できます。

ILM ルールは以下を定義します。

* どのオブジェクトを保存するか。ルールはすべてのオブジェクトに適用できます。また、フィルターを指定して、ルールが適用されるオブジェクトを識別することもできます。たとえば、ルールは、特定のテナント アカウント、特定の S3 バケットまたは Swift コンテナ、または特定のメタデータ値に関連付けられたオブジェクトにのみ適用できます。
* ストレージの種類と場所。オブジェクトは、ストレージ ノードまたはクラウド ストレージ プールに保存できます。
* 作成されたオブジェクトのコピーの種類。コピーは複製または消去コード化できます。
* 複製されたコピーの場合は、作成されたコピーの数。
* 消去符号化コピーの場合、使用される消去符号化方式。
* オブジェクトの保存場所とコピーの種類の時間の経過に伴う変化。
* オブジェクトがグリッドに取り込まれるときにオブジェクト データがどのように保護されるか (同期配置またはデュアル コミット)。


オブジェクト メタデータは ILM ルールによって管理されないことに注意してください。代わりに、オブジェクト メタデータは、メタデータ ストアと呼ばれる Cassandra データベースに保存されます。データの損失を防ぐために、オブジェクト メタデータの 3 つのコピーが各サイトで自動的に維持されます。



== ILMルールの例

たとえば、ILM ルールでは次のように指定できます。

* テナント A に属するオブジェクトにのみ適用します。
* これらのオブジェクトの複製コピーを 2 つ作成し、各コピーを別のサイトに保存します。
* 2 つのコピーを「永久に」保持します。つまり、 StorageGRID はそれらを自動的に削除しません。代わりに、 StorageGRID は、クライアントの削除要求によって削除されるか、バケットのライフサイクルの有効期限が切れるまで、これらのオブジェクトを保持します。
* 取り込み動作にはバランス オプションを使用します。必要な両方のコピーをすぐに作成できない場合を除き、テナント A がオブジェクトをStorageGRIDに保存するとすぐ、2 つのサイトへの配置指示が適用されます。
+
たとえば、テナント A がオブジェクトを保存するときにサイト 2 にアクセスできない場合、 StorageGRID はサイト 1 のストレージ ノードに 2 つの中間コピーを作成します。サイト 2 が利用可能になるとすぐに、 StorageGRID はそのサイトで必要なコピーを作成します。





== ILMポリシーがオブジェクトを評価する方法

StorageGRIDシステムのアクティブな ILM ポリシーは、すべてのオブジェクトの配置、期間、および取り込み動作を制御します。

クライアントがオブジェクトをStorageGRIDに保存すると、オブジェクトは次のようにアクティブ ポリシー内の順序付けられた ILM ルール セットに対して評価されます。

. ポリシーの最初のルールのフィルターがオブジェクトと一致する場合、オブジェクトはそのルールの取り込み動作に従って取り込まれ、そのルールの配置指示に従って保存されます。
. 最初のルールのフィルターがオブジェクトと一致しない場合、一致が見つかるまで、オブジェクトはポリシー内の後続の各ルールに対して評価されます。
. オブジェクトに一致するルールがない場合、ポリシー内のデフォルト ルールの取り込み動作と配置手順が適用されます。デフォルト ルールはポリシー内の最後のルールであり、フィルターは使用できません。すべてのテナント、すべてのバケット、すべてのオブジェクト バージョンに適用する必要があります。




== ILMポリシーの例

たとえば、ILM ポリシーには、次の内容を指定する 3 つの ILM ルールを含めることができます。

* *ルール1: テナントAの複製コピー*
+
** テナント A に属するすべてのオブジェクトを一致させます。
** これらのオブジェクトを 3 つの複製コピーとして 3 つのサイトに保存します。
** 他のテナントに属するオブジェクトはルール 1 に一致しないため、ルール 2 に対して評価されます。


* *ルール2: 1 MBを超えるオブジェクトの消失訂正符号*
+
** 他のテナントのすべてのオブジェクトと一致しますが、1 MB を超える場合のみです。これらの大きなオブジェクトは、6+3 消失訂正符号化を使用して 3 つのサイトに保存されます。
** 1 MB 以下のオブジェクトには一致しないため、これらのオブジェクトはルール 3 に対して評価されます。


* *ルール3: 2つのコピー、2つのデータセンター* (デフォルト)
+
** ポリシー内の最後のデフォルトのルールです。フィルターは使用しません。
** ルール 1 またはルール 2 に一致しないすべてのオブジェクト (テナント A に属さない 1 MB 以下のオブジェクト) の複製コピーを 2 つ作成します。




image::../media/ilm_policy_and_rules.png[ILMポリシーとルール]

.関連情報
* link:../ilm/index.html["ILMでオブジェクトを管理する"]

