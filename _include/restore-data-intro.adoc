= どのような手順を使用すればよいですか?
:allow-uri-read: 




== どのような手順を使用すればよいですか?

可能な場合は、グリッド マネージャーの *ボリューム復元* ページを使用してオブジェクト データを復元します。

* ボリュームが*メンテナンス* > *ボリュームの復元* > *復元するノード*にリストされている場合は、link:../maintain/restoring-volume.html["グリッド マネージャーのボリューム復元ページ"] 。
* *メンテナンス* > *ボリュームの復元* > *復元するノード*にボリュームが表示されない場合は、以下の手順に従ってください。 `repair-data`オブジェクト データを復元するスクリプト。
+
回復したストレージノードに含まれるボリューム数が、交換するノードより少ない場合は、 `repair-data`スクリプト。




NOTE: repair-data スクリプトは非推奨であり、将来のリリースで削除される予定です。可能な場合は、link:../maintain/restoring-volume.html["グリッドマネージャでのボリューム復元手順"] 。



== 使用 `repair-data`オブジェクトデータを復元するスクリプト

.開始する前に
* 回復したストレージノードの接続状態が「接続済み」であることを確認しましたimage:../media/icon_alert_green_checkmark.png["アイコンアラート緑のチェックマーク"]グリッド マネージャーの *ノード* > *概要* タブで。


.タスク概要
グリッドの ILM ルールがオブジェクトのコピーを使用できるように構成されていると仮定すると、オブジェクト データは他のストレージ ノードまたはクラウド ストレージ プールから復元できます。

次の点に注意してください。

* ILM ルールが複製されたコピーを 1 つだけ保存するように設定されていて、そのコピーが障害が発生したストレージ ボリューム上に存在していた場合、オブジェクトを回復することはできません。
* オブジェクトの唯一のコピーが Cloud Storage Pool 内にある場合、 StorageGRID はオブジェクト データを復元するために Cloud Storage Pool エンドポイントに複数のリクエストを発行する必要があります。この手順を実行する前に、テクニカル サポートに問い合わせて、回復の所要時間と関連コストの見積もりを依頼してください。




== について `repair-data`スクリプト

オブジェクトデータを復元するには、 `repair-data`スクリプト。このスクリプトは、オブジェクト データの復元プロセスを開始し、ILM スキャンと連携して ILM ルールが満たされていることを確認します。

以下の*複製データ*または*消失訂正符号化（EC）データ*を選択して、 `repair-data`複製されたデータを復元するのか、消失訂正符号化されたデータを復元するのかに応じて、スクリプトを選択します。両方の種類のデータを復元する必要がある場合は、両方のコマンド セットを実行する必要があります。


NOTE: 詳細については、 `repair-data`スクリプトを入力 `repair-data --help`プライマリ管理ノードのコマンド ラインから。


NOTE: repair-data スクリプトは非推奨であり、将来のリリースで削除される予定です。可能な場合は、link:../maintain/restoring-volume.html["グリッドマネージャでのボリューム復元手順"] 。

[role="tabbed-block"]
====
.複製されたデータ
--
複製されたデータを復元するには、ノード全体を修復する必要があるか、ノード上の特定のボリュームのみを修復する必要があるかに応じて、次の 2 つのコマンドを使用できます。

`repair-data start-replicated-node-repair`

`repair-data start-replicated-volume-repair`

次のコマンドを使用して、複製されたデータの修復を追跡できます。

`repair-data show-replicated-repair-status`

--
.消失訂正符号化（EC）データ
--
ノード全体を修復する必要があるか、ノード上の特定のボリュームのみを修復する必要があるかに応じて、消去コード化されたデータを復元するための 2 つのコマンドが使用できます。

`repair-data start-ec-node-repair`

`repair-data start-ec-volume-repair`

次のコマンドを使用して、消去コード化されたデータの修復を追跡できます。

`repair-data show-ec-repair-status`


NOTE: 一部のストレージ ノードがオフラインの場合でも、消去コード化されたデータの修復を開始できます。ただし、すべての消去コード化されたデータを把握できない場合は、修復を完了できません。すべてのノードが利用可能になると修復が完了します。


NOTE: EC 修復ジョブでは、一時的に大量のストレージが予約されます。ストレージアラートがトリガーされる可能性がありますが、修復が完了すると解決されます。予約に十分なストレージがない場合、EC 修復ジョブは失敗します。  EC 修復ジョブが完了すると、ジョブが失敗したか成功したかに関係なく、ストレージ予約が解放されます。

--
====