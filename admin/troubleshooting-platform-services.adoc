---
permalink: admin/troubleshooting-platform-services.html 
sidebar: sidebar 
keywords: troubleshoot platform services, platform services endpoint error 
summary: プラットフォーム サービスで使用されるエンドポイントは、テナント マネージャでテナント ユーザーによって作成および管理されます。ただし、テナントでプラットフォーム サービスの構成または使用に関する問題が発生した場合、グリッド マネージャを使用して問題を解決できる可能性があります。 
---
= プラットフォームサービスのトラブルシューティング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
プラットフォーム サービスで使用されるエンドポイントは、テナント マネージャでテナント ユーザーによって作成および管理されます。ただし、テナントでプラットフォーム サービスの構成または使用に関する問題が発生した場合、グリッド マネージャを使用して問題を解決できる可能性があります。



== 新しいエンドポイントの問題

テナントがプラットフォーム サービスを使用するには、テナント マネージャーを使用して 1 つ以上のエンドポイントを作成する必要があります。各エンドポイントは、 StorageGRID S3 バケット、Amazon Web Services バケット、Amazon Simple Notification Service トピック、Kafka トピック、ローカルまたは AWS でホストされている Elasticsearch クラスターなど、1 つのプラットフォーム サービスの外部宛先を表します。各エンドポイントには、外部リソースの場所と、そのリソースにアクセスするために必要な資格情報の両方が含まれます。

テナントがエンドポイントを作成すると、 StorageGRIDシステムはエンドポイントが存在し、指定された資格情報を使用してアクセスできることを検証します。エンドポイントへの接続は、各サイトの 1 つのノードから検証されます。

エンドポイントの検証に失敗した場合、エンドポイントの検証が失敗した理由を説明するエラー メッセージが表示されます。テナント ユーザーは問題を解決してから、エンドポイントの作成を再度試みる必要があります。


NOTE: テナント アカウントに対してプラットフォーム サービスが有効になっていない場合、エンドポイントの作成は失敗します。



== 既存のエンドポイントの問題

StorageGRID が既存のエンドポイントに到達しようとしたときにエラーが発生した場合、テナント マネージャーのダッシュボードにメッセージが表示されます。

image::../media/tenant_dashboard_endpoint_error.png[ダッシュボード上のエンドポイントエラーメッセージ]

テナント ユーザーは、[エンドポイント] ページにアクセスして、各エンドポイントの最新のエラー メッセージを確認し、エラーが発生した時期を確認できます。 *最後のエラー* 列には、各エンドポイントの最新のエラー メッセージが表示され、エラーが発生した時刻が示されます。エラーには、image:../media/icon_alert_red_critical.png["赤いXアイコン"]アイコンは過去 7 日以内に発生しました。

image::../media/endpoints_last_error.png[最後のエラー列が表示されたエンドポイントページのスクリーンショット]


NOTE: *最後のエラー* 列の一部のエラー メッセージには、括弧で囲まれた logID が含まれる場合があります。グリッド管理者またはテクニカル サポートは、この ID を使用して、bycast.log 内のエラーに関する詳細情報を見つけることができます。



== プロキシサーバーに関連する問題

設定した場合link:configuring-storage-proxy-settings.html["ストレージプロキシ"]ストレージノードとプラットフォーム サービス エンドポイント間で、プロキシ サービスがStorageGRIDからのメッセージを許可しない場合はエラーが発生する可能性があります。これらの問題を解決するには、プロキシ サーバーの設定を確認し、プラットフォーム サービス関連のメッセージがブロックされていないことを確認します。



== エラーが発生したかどうかを確認する

過去 7 日以内にエンドポイント エラーが発生した場合、テナント マネージャーのダッシュボードに警告メッセージが表示されます。エラーの詳細を確認するには、「エンドポイント」ページにアクセスしてください。



== クライアント操作が失敗する

一部のプラットフォーム サービスの問題により、S3 バケットでのクライアント操作が失敗する可能性があります。たとえば、内部の Replicated State Machine (RSM) サービスが停止した場合、または配信キューに入っているプラットフォーム サービス メッセージが多すぎる場合、S3 クライアント操作は失敗します。

サービスのステータスを確認するには:

. *サポート* > *ツール* > *グリッド トポロジ* を選択します。
. *_site_* > *_Storage Node_* > *SSM* > *Services* を選択します。




== 回復可能なエンドポイント エラーと回復不可能なエンドポイント エラー

エンドポイントが作成された後、さまざまな理由によりプラットフォーム サービス要求エラーが発生する可能性があります。一部のエラーはユーザーの介入によって回復可能です。たとえば、回復可能なエラーは次の理由で発生する可能性があります。

* ユーザーの資格情報は削除されているか、期限が切れています。
* 宛先バケットが存在しません。
* 通知を配信できません。


StorageGRID で回復可能なエラーが発生した場合、プラットフォーム サービス要求は成功するまで再試行されます。

その他のエラーは回復できません。たとえば、エンドポイントが削除されると、回復できないエラーが発生します。

StorageGRID で回復不可能なエンドポイント エラーが発生した場合:

* グリッド マネージャーで、*サポート* > *ツール* > *メトリック* > *Grafana* > *プラットフォーム サービスの概要* に移動して、エラーの詳細を表示します。
* テナント マネージャーで、*ストレージ (S3)* > *プラットフォーム サービス エンドポイント* に移動して、エラーの詳細を表示します。
* チェックしてください `/var/local/log/bycast-err.log`関連するエラーについて。  ADC サービスを持つストレージ ノードには、このログ ファイルが含まれます。




== プラットフォームサービスメッセージを配信できません

宛先でプラットフォーム サービス メッセージを受け入れられない問題が発生した場合、バケットに対するクライアント操作は成功しますが、プラットフォーム サービス メッセージは配信されません。たとえば、宛先で資格情報が更新され、 StorageGRID が宛先サービスに対して認証できなくなった場合に、このエラーが発生する可能性があります。

関連するアラートを確認します。



== プラットフォームサービスリクエストのパフォーマンスが低下

リクエストの送信速度が宛先エンドポイントがリクエストを受信できる速度を超えた場合、 StorageGRIDソフトウェアはバケットの受信 S3 リクエストを調整することがあります。スロットルは、宛先エンドポイントへの送信を待機しているリクエストのバックログがある場合にのみ発生します。

目に見える唯一の影響は、受信する S3 リクエストの実行に時間がかかるようになることです。パフォーマンスが大幅に低下していることが検出された場合は、取り込み速度を下げるか、容量の大きいエンドポイントを使用する必要があります。リクエストのバックログが増え続けると、クライアントの S3 操作 (PUT リクエストなど) は最終的に失敗します。

CloudMirror リクエストは、通常、検索統合リクエストやイベント通知リクエストよりも多くのデータ転送を伴うため、宛先エンドポイントのパフォーマンスの影響を受ける可能性が高くなります。



== プラットフォームサービスリクエストが失敗する

プラットフォーム サービスのリクエスト失敗率を表示するには:

. 「NODES」を選択します。
. *_site_* > *プラットフォーム サービス* を選択します。
. リクエストエラー率グラフを表示します。
+
image::../media/nodes_page_site_level_platform_services.gif[ノードページサイトレベルプラットフォームサービス]





== プラットフォームサービス利用不可の警告

*プラットフォーム サービスが利用できません* アラートは、RSM サービスが稼働しているストレージ ノードまたは利用可能なストレージ ノードが少なすぎるため、サイトでプラットフォーム サービス操作を実行できないことを示します。

RSM サービスは、プラットフォーム サービス要求がそれぞれのエンドポイントに送信されるようにします。

このアラートを解決するには、サイトのどのストレージ ノードに RSM サービスが含まれているかを確認します。 (RSM サービスは、ADC サービスも含まれるストレージ ノード上に存在します。)次に、それらのストレージ ノードの過半数が実行中であり、利用可能であることを確認します。


NOTE: サイトで RSM サービスを含む複数のストレージ ノードに障害が発生した場合、そのサイトの保留中のプラットフォーム サービス要求はすべて失われます。



== プラットフォーム サービス エンドポイントに関する追加のトラブルシューティング ガイダンス

詳細については、link:../tenant/troubleshooting-platform-services-endpoint-errors.html["テナント アカウントの使用 > プラットフォーム サービス エンドポイントのトラブルシューティング"] 。

.関連情報
link:../troubleshoot/index.html["StorageGRIDシステムのトラブルシューティング"]
