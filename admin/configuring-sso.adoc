---
permalink: admin/configuring-sso.html 
sidebar: sidebar 
keywords: configure single sign on, sso, SAML 
summary: 'シングル サインオン (SSO) が有効になっている場合、組織によって実装された SSO サインイン プロセスを使用して資格情報が承認されている場合にのみ、ユーザーは Grid Manager、Tenant Manager、Grid Management API、または Tenant Management API にアクセスできます。ローカル ユーザーはStorageGRIDにサインインできません。' 
---
= シングルサインオンを構成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
シングル サインオン (SSO) が有効になっている場合、組織によって実装された SSO サインイン プロセスを使用して資格情報が承認されている場合にのみ、ユーザーは Grid Manager、Tenant Manager、Grid Management API、または Tenant Management API にアクセスできます。ローカル ユーザーはStorageGRIDにサインインできません。



== シングルサインオンの仕組み

StorageGRIDシステムは、Security Assertion Markup Language 2.0 (SAML 2.0) 標準を使用したシングル サインオン (SSO) をサポートしています。

シングル サインオン (SSO) を有効にする前に、SSO が有効になっている場合にStorageGRID のサインインおよびサインアウト プロセスがどのように影響を受けるかを確認してください。



=== SSO が有効になっているときにSign in

SSO が有効になっているときにStorageGRIDにサインインすると、資格情報を検証するために組織の SSO ページにリダイレクトされます。

.手順
. Web ブラウザに、任意のStorageGRID管理ノードの完全修飾ドメイン名または IP アドレスを入力します。
+
StorageGRIDSign inページが表示されます。

+
** このブラウザで初めて URL にアクセスする場合は、アカウント ID の入力を求められます。
+
image::../media/sso_sign_in_first_time.png[SSO を有効にして初回アクセスSign in]

** 以前に Grid Manager または Tenant Manager にアクセスしたことがある場合は、最近のアカウントを選択するか、アカウント ID を入力するように求められます。
+
image::../media/sign_in_sso.png[SSO が有効な場合のStorageGRIDサインイン ページ]



+

NOTE: テナントアカウントの完全なURL（完全修飾ドメイン名またはIPアドレスの後に続く）を入力した場合、 StorageGRIDSign inページは表示されません。 `/?accountId=_20-digit-account-id_` ）。代わりに、組織のSSOサインインページにすぐにリダイレクトされ、<<signin_sso,SSO認証情報でサインイン>> 。

. グリッド マネージャにアクセスするか、テナント マネージャにアクセスするかを指定します。
+
** グリッド マネージャーにアクセスするには、*アカウント ID* フィールドを空白のままにするか、アカウント ID として *0* を入力するか、最近のアカウントのリストに *グリッド マネージャー* が表示されている場合はそれを選択します。
** テナント マネージャーにアクセスするには、20 桁のテナント アカウント ID を入力するか、最近のアカウントのリストにテナントが表示されている場合は名前でテナントを選択します。


. *Sign in*を選択
+
StorageGRID は組織の SSO サインイン ページにリダイレクトします。例えば：

+
image::../media/sso_organization_page.gif[SSO の組織サインイン ページの例]

. [[signin_sso]] SSO 資格情報を使用してSign in。
+
SSO 資格情報が正しい場合:

+
.. アイデンティティ プロバイダー (IdP) は、 StorageGRIDに認証応答を提供します。
.. StorageGRID は認証応答を検証します。
.. 応答が有効であり、 StorageGRIDアクセス権限を持つフェデレーション グループに属している場合は、選択したアカウントに応じて Grid Manager または Tenant Manager にサインインします。
+

NOTE: サービス アカウントにアクセスできない場合でも、 StorageGRIDアクセス権限を持つフェデレーション グループに属する既存のユーザーであれば、サインインできます。



. 必要に応じて、適切な権限がある場合は、他の管理ノードにアクセスしたり、グリッド マネージャまたはテナント マネージャにアクセスしたりします。
+
SSO 資格情報を再入力する必要はありません。





=== SSO が有効になっているときにサインアウトする

StorageGRIDで SSO が有効になっている場合、サインアウト時に何が起こるかは、何にサインインしているか、どこからサインアウトしているかによって異なります。

.手順
. ユーザー インターフェースの右上隅にある *サインアウト* リンクを見つけます。
. *サインアウト*を選択します。
+
StorageGRIDSign inページが表示されます。  *最近のアカウント* ドロップダウンが更新され、*グリッド マネージャー* またはテナントの名前が含まれるようになったため、今後はこれらのユーザー インターフェイスにすばやくアクセスできるようになります。

+
[cols="1a,1a,1a"]
|===
| ...にサインインしている場合 | そしてサインアウトします... | ログアウトしています... 


 a| 
1 つ以上の管理ノード上のグリッド マネージャー
 a| 
任意の管理ノード上のグリッド マネージャー
 a| 
すべての管理ノード上のグリッド マネージャー

*注:* SSO に Azure を使用する場合、すべての管理ノードからサインアウトするまでに数分かかることがあります。



 a| 
1 つ以上の管理ノード上のテナント マネージャー
 a| 
任意の管理ノード上のテナント マネージャー
 a| 
すべての管理ノード上のテナント マネージャー



 a| 
グリッドマネージャとテナントマネージャの両方
 a| 
Grid Manager
 a| 
グリッド マネージャーのみ。  SSO からサインアウトするには、テナント マネージャーからもサインアウトする必要があります。



 a| 
Tenant Manager
 a| 
テナント マネージャーのみ。  SSO からサインアウトするには、Grid Manager からもサインアウトする必要があります。

|===



NOTE: 次の表は、単一のブラウザ セッションを使用している場合にサインアウトすると何が起こるかをまとめたものです。複数のブラウザ セッションにわたってStorageGRIDにサインインしている場合は、すべてのブラウザ セッションから個別にサインアウトする必要があります。
