---
permalink: admin/managing-high-availability-groups.html 
sidebar: sidebar 
keywords: manage high availability group, ha groups, admin node, gateway node, active interface, backup interface, priority order 
summary: '高可用性 (HA) グループは、S3 クライアントに高可用性のデータ接続を提供し、グリッド マネージャおよびテナント マネージャへの高可用性の接続も提供します。' 
---
= 高可用性 (HA) グループとは何ですか?
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
高可用性 (HA) グループは、S3 クライアントに高可用性のデータ接続を提供し、グリッド マネージャーおよびテナント マネージャーに高可用性の接続を提供します。

複数の管理ノードとゲートウェイ ノードのネットワーク インターフェイスを高可用性 (HA) グループにグループ化できます。  HA グループ内のアクティブ インターフェイスに障害が発生した場合、バックアップ インターフェイスがワークロードを管理できます。

各 HA グループは、選択したノード上の共有サービスへのアクセスを提供します。

* ゲートウェイ ノード、管理ノード、またはその両方を含む HA グループは、S3 クライアントに高可用性のデータ接続を提供します。
* 管理ノードのみを含む HA グループは、グリッド マネージャとテナント マネージャへの高可用性接続を提供します。
* サービスアプライアンスとVMwareベースのソフトウェアノードのみを含むHAグループは、高可用性接続を提供できます。link:../admin/manage-s3-select-for-tenant-accounts.html["S3 Select を使用する S3 テナント"] 。  S3 Select を使用する場合は HA グループが推奨されますが、必須ではありません。




== HA グループはどのように作成しますか?

. 1 つ以上の管理ノードまたはゲートウェイ ノードのネットワーク インターフェイスを選択します。グリッド ネットワーク (eth0) インターフェイス、クライアント ネットワーク (eth2) インターフェイス、VLAN インターフェイス、またはノードに追加したアクセス インターフェイスを使用できます。
+

NOTE: DHCP によって割り当てられた IP アドレスがある場合、HA グループにインターフェイスを追加することはできません。

. 1 つのインターフェースをプライマリ インターフェースとして指定します。障害が発生しない限り、プライマリ インターフェイスはアクティブ インターフェイスになります。
. バックアップ インターフェイスの優先順位を決定します。
. グループに 1 ～ 10 個の仮想 IP (VIP) アドレスを割り当てます。クライアント アプリケーションは、これらの VIP アドレスのいずれかを使用してStorageGRIDに接続できます。


手順については、link:configure-high-availability-group.html["高可用性グループを構成する"] 。



== アクティブインターフェースとは何ですか?

通常の動作中、HA グループのすべての VIP アドレスは、優先順位の最初のインターフェイスであるプライマリ インターフェイスに追加されます。プライマリ インターフェイスが使用可能である限り、クライアントがグループの任意の VIP アドレスに接続するときにそのインターフェイスが使用されます。つまり、通常の操作中は、プライマリ インターフェイスがグループの「アクティブ」インターフェイスになります。

同様に、通常の操作中は、HA グループの優先度の低いインターフェースは「バックアップ」インターフェースとして機能します。これらのバックアップ インターフェイスは、プライマリ (現在アクティブ) インターフェイスが使用できなくなった場合を除き、使用されません。



== ノードの現在のHAグループのステータスを表示する

ノードが HA グループに割り当てられているかどうかを確認し、現在のステータスを確認するには、*NODES* > *_node_* を選択します。

*概要* タブに *HA グループ* のエントリが含まれている場合、ノードはリストされている HA グループに割り当てられます。グループ名の後の値は、HA グループ内のノードの現在のステータスです。

* *アクティブ*: HA グループは現在このノードでホストされています。
* *バックアップ*: HA グループは現在このノードを使用していません。これはバックアップ インターフェイスです。
* *停止*: 高可用性 (keepalived) サービスが手動で停止されているため、このノードで HA グループをホストできません。
* *障害*: 次の 1 つ以上の理由により、このノードで HA グループをホストできません。
+
** ロード バランサ (nginx-gw) サービスがノード上で実行されていません。
** ノードの eth0 または VIP インターフェースがダウンしています。
** ノードは停止しています。




この例では、プライマリ管理ノードが 2 つの HA グループに追加されています。このノードは現在、管理クライアント グループのアクティブ インターフェイスであり、 FabricPoolクライアント グループのバックアップ インターフェイスです。

image::../media/ha_group_primary_interface.png[HAグループのプライマリインターフェース]



== アクティブ インターフェイスに障害が発生するとどうなりますか?

現在 VIP アドレスをホストしているインターフェースがアクティブ インターフェースです。 HA グループに複数のインターフェイスが含まれており、アクティブ インターフェイスに障害が発生した場合、VIP アドレスは優先順位に従って最初に使用可能なバックアップ インターフェイスに移動します。そのインターフェースに障害が発生した場合、VIP アドレスは次の利用可能なバックアップ インターフェースに移動し、これが繰り返されます。

フェイルオーバーは、次のいずれかの理由でトリガーされる可能性があります。

* インターフェースが設定されているノードがダウンします。
* インターフェイスが設定されているノードは、少なくとも 2 分間、他のすべてのノードとの接続を失います。
* アクティブ インターフェースがダウンします。
* ロード バランサー サービスが停止します。
* 高可用性サービスが停止します。



NOTE: アクティブ インターフェイスをホストするノード外部のネットワーク障害によってフェイルオーバーがトリガーされない場合があります。同様に、フェイルオーバーは、Grid Manager または Tenant Manager のサービスによってトリガーされません。

フェイルオーバー プロセスは通常、数秒しかかからず、クライアント アプリケーションへの影響がほとんどなく、通常の再試行動作によって操作を続行できるほど高速です。

障害が解決され、より優先度の高いインターフェイスが再び使用可能になると、VIP アドレスは使用可能な最も優先度の高いインターフェイスに自動的に移動されます。
