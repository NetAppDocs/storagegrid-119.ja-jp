---
permalink: admin/grid-federation-create-connection.html 
sidebar: sidebar 
keywords: grid federation, create connection, configure connection 
summary: テナントの詳細を複製し、オブジェクト データを複製する場合は、2 つのStorageGRIDシステム間にグリッド フェデレーション接続を作成できます。 
---
= グリッドフェデレーション接続を作成する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
テナントの詳細を複製し、オブジェクト データを複製する場合は、2 つのStorageGRIDシステム間にグリッド フェデレーション接続を作成できます。

図に示すように、グリッド フェデレーション接続を作成するには、両方のグリッドでの手順が含まれます。 1 つのグリッドに接続を追加し、他のグリッドで接続を完了します。どちらのグリッドからでも開始できます。

image::../media/grid-federation-create-connection.png[2つのグリッドに接続を作成する手順のグラフィック概要]

.開始する前に
* あなたは、link:grid-federation-overview.html["考慮事項と要件"]グリッド フェデレーション接続を構成します。
* 各グリッドに IP アドレスまたは VIP アドレスではなく完全修飾ドメイン名 (FQDN) を使用する予定の場合は、使用する名前がわかっており、各グリッドの DNS サーバーに適切なエントリがあることを確認しています。
* 使用していますlink:../admin/web-browser-requirements.html["サポートされているウェブブラウザ"]。
* 両方のグリッドに対するルート アクセス権限とプロビジョニング パスフレーズを持っています。




== 接続を追加

2 つのStorageGRIDシステムのいずれかでこれらの手順を実行します。

.手順
. どちらかのグリッドのプライマリ管理ノードからグリッド マネージャーにSign in。
. *構成* > *システム* > *グリッド フェデレーション* を選択します。
. *接続を追加*を選択します。
. 接続の詳細を入力します。
+
[cols="1a,2a"]
|===
| フィールド | 説明 


 a| 
接続名
 a| 
この接続を認識するのに役立つ一意の名前 (例: 「Grid 1-Grid 2」)。



 a| 
このグリッドのFQDNまたはIP
 a| 
次のいずれかが必要：

** 現在サインインしているグリッドの FQDN
** このグリッド上のHAグループのVIPアドレス
** このグリッド上の管理ノードまたはゲートウェイ ノードの IP アドレス。  IP は、宛先グリッドが到達可能な任意のネットワーク上に存在できます。




 a| 
ポート
 a| 
この接続に使用するポート。  23000 から 23999 までの未使用のポート番号を入力できます。

この接続の両方のグリッドは同じポートを使用します。どちらのグリッド内のノードも、このポートを他の接続に使用していないことを確認する必要があります。



 a| 
このグリッドの証明書の有効日数
 a| 
接続内のこのグリッドのセキュリティ証明書を有効にする日数。デフォルト値は 730 日 (2 年) ですが、1 日から 762 日までの任意の値を入力できます。

StorageGRID は、接続を保存すると、グリッドごとにクライアント証明書とサーバー証明書を自動的に生成します。



 a| 
このグリッドのプロビジョニング パスフレーズ
 a| 
サインインしているグリッドのプロビジョニング パスフレーズ。



 a| 
他のグリッドのFQDNまたはIP
 a| 
次のいずれかが必要：

** 接続するグリッドのFQDN
** 他のグリッド上のHAグループのVIPアドレス
** 他のグリッド上の管理ノードまたはゲートウェイ ノードの IP アドレス。  IP は、ソース グリッドが到達可能な任意のネットワーク上に存在できます。


|===
. *保存して続行*を選択します。
. 検証ファイルのダウンロード手順では、*検証ファイルのダウンロード*を選択します。
+
他のグリッドで接続が完了すると、どちらのグリッドからも検証ファイルをダウンロードできなくなります。

. ダウンロードしたファイルを見つける(`_connection-name_.grid-federation`）を作成し、安全な場所に保存します。
+

CAUTION: このファイルには秘密情報（ `***` ) やその他の機密詳細が含まれるため、安全に保存して送信する必要があります。

. *閉じる* を選択して、グリッド フェデレーション ページに戻ります。
. 新しい接続が表示され、その*接続ステータス*が*接続待機中*であることを確認します。
. 提供する `_connection-name_.grid-federation`他のグリッドのグリッド管理者にファイルを送信します。




== 完全な接続

接続先のStorageGRIDシステム (他のグリッド) で次の手順を実行します。

.手順
. プライマリ管理ノードからグリッド マネージャーにSign in。
. *構成* > *システム* > *グリッド フェデレーション* を選択します。
. アップロード ページにアクセスするには、[*検証ファイルのアップロード*] を選択します。
. *確認ファイルのアップロード*を選択します。次に、最初のグリッドからダウンロードしたファイルを参照して選択します。(`_connection-name_.grid-federation` ）。
+
接続の詳細が表示されます。

. 必要に応じて、このグリッドのセキュリティ証明書の有効日数を入力します。  *証明書の有効日数* エントリは、最初のグリッドで入力した値がデフォルトで設定されますが、グリッドごとに異なる有効期限を使用できます。
+
一般に、接続の両側の証明書には同じ日数を使用します。

+

CAUTION: 接続のいずれかの端の証明書の有効期限が切れると、接続は機能しなくなり、証明書が更新されるまでレプリケーションは保留になります。

. 現在サインインしているグリッドのプロビジョニング パスフレーズを入力します。
. *保存してテスト*を選択します。
+
証明書が生成され、接続がテストされます。接続が有効な場合は、成功メッセージが表示され、新しい接続がグリッド フェデレーション ページに表示されます。  *接続ステータス*は*接続済み*になります。

+
エラー メッセージが表示された場合は、問題に対処してください。見るlink:grid-federation-troubleshoot.html["グリッドフェデレーションエラーのトラブルシューティング"] 。

. 最初のグリッドのグリッド フェデレーション ページに移動し、ブラウザーを更新します。  *接続ステータス*が*接続済み*になっていることを確認します。
. 接続が確立されたら、検証ファイルのすべてのコピーを安全に削除します。
+
この接続を編集すると、新しい検証ファイルが作成されます。元のファイルは再利用できません。



.終了後の操作
* 検討事項を確認するlink:grid-federation-manage-tenants.html["許可されたテナントの管理"]。
* link:creating-tenant-account.html["1つ以上の新しいテナントアカウントを作成する"]、*グリッド フェデレーション接続を使用する*権限を割り当て、新しい接続を選択します。
* link:grid-federation-manage-connection.html["接続を管理する"]必要に応じて。接続値を編集したり、接続をテストしたり、接続証明書をローテーションしたり、接続を削除したりできます。
* link:../monitor/grid-federation-monitor-connections.html["接続を監視する"]通常のStorageGRID監視アクティビティの一環として。
* link:grid-federation-troubleshoot.html["接続のトラブルシューティング"]アカウントのクローンとグリッド間のレプリケーションに関連するアラートとエラーの解決も含まれます。

